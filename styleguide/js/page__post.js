(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*! PhotoSwipe Default UI - 4.0.3 - 2015-01-03
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / "},A=function(a){if(r)return!0;a=a||window.event;for(var c,d,e=a.target||a.srcElement,f=e.className,g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>1200},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),c.href?c.hasAttribute("download")?!0:(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1):!1},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom=g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){J++,2===J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&.95>a?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&.9>b?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){a=!1,a&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;f>g;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.className&&a.type.indexOf("mouse")>-1&&(d.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,D()},v.updateFullscreen=function(){C(a.template,"fs",c.isFullscreen())},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType)I(d)&&a.close(),b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?a.close():a.toggleDesktopZoom(c.detail.releasePoint));else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){return j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}};return a});
},{}],2:[function(require,module,exports){
/*! PhotoSwipe - v4.0.3 - 2015-01-05
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&8>g&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(4.4>i&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;4>n;n++){c=m[n];for(var o=0;3>o;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.5},maxSpreadZoom:2,scaleMode:"fit",modal:!0,alwaysFadeIn:!1};e.extend(i,d);var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb=function(){return{x:0,y:0}},ob=nb(),pb=nb(),qb=nb(),rb={},sb=0,tb=nb(),ub=0,vb=!0,wb=[],xb={},yb=function(a,b){e.extend(f,b.publicMethods),wb.push(a)},zb=function(a){var b=_c();return a>b-1?a-b:0>a?b+a:a},Ab={},Bb=function(a,b){return Ab[a]||(Ab[a]=[]),Ab[a].push(b)},Cb=function(a){var b=Ab[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Db=function(){return(new Date).getTime()},Eb=function(a){kb=a,f.bg.style.opacity=a*i.bgOpacity},Fb=function(a,b,c,d){a[G]=u+b+"px, "+c+"px"+v+" scale("+d+")"},Gb=function(){fb&&Fb(fb,qb.x,qb.y,s)},Hb=function(a){a.container&&Fb(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel)},Ib=function(a,b){b[G]=u+a+"px, 0px"+v},Jb=function(a,b){if(!i.loop&&b){var c=m+(tb.x*sb-a)/tb.x,d=Math.round(a-sc.x);(0>c&&d>0||c>=_c()-1&&0>d)&&(a=sc.x+d*i.mainScrollEndFriction)}sc.x=a,Ib(a,n)},Kb=function(a,b){var c=tc[a]-y[a];return pb[a]+ob[a]+c-c*(b/t)},Lb=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Mb=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Nb=null,Ob=function(){Nb&&(e.unbind(document,"mousemove",Ob),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,Cb("mouseUsed")),Nb=setTimeout(function(){Nb=null},100)},Pb=function(){e.bind(document,"keydown",f),P.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",Ob),e.bind(window,"resize scroll",f),Cb("bindEvents")},Qb=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",r.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Ob),P.transform&&e.unbind(f.scrollWrap,"click",f),W&&e.unbind(window,p,f),Cb("unbindEvents")},Rb=function(a,b){var c=hd(f.currItem,rb,a);return b&&(eb=c),c},Sb=function(a){return a||(a=f.currItem),a.initialZoomLevel},Tb=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},Ub=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Kb(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]?(c[a]=b.max[a],!0):!1)},Vb=function(){if(G){var b=P.perspective&&!I;return u="translate"+(b?"3d(":"("),void(v=P.perspective?", 0px)":")")}G="left",e.addClass(a,"pswp--ie"),Ib=function(a,b){b.left=a+"px"},Hb=function(a){var b=a.container.style,c=a.fitRatio*a.w,d=a.fitRatio*a.h;b.width=c+"px",b.height=d+"px",b.left=a.initialPosition.x+"px",b.top=a.initialPosition.y+"px"},Gb=function(){if(fb){var a=fb,b=f.currItem,c=b.fitRatio*b.w,d=b.fitRatio*b.h;a.width=c+"px",a.height=d+"px",a.left=qb.x+"px",a.top=qb.y+"px"}}},Wb=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Xb=function(a){a&&(Z||Y||gb||U)&&(a.preventDefault(),a.stopPropagation())},Yb=function(){z=!0,i.closeOnScroll&&j&&(!f.likelyTouchDevice||i.mouseUsed)&&Math.abs(e.getScrollY()-M)>2&&(l=!0,f.close())},Zb={},$b=0,_b=function(a){Zb[a]&&(Zb[a].raf&&K(Zb[a].raf),$b--,delete Zb[a])},ac=function(a){Zb[a]&&_b(a),Zb[a]||($b++,Zb[a]={})},bc=function(){for(var a in Zb)Zb.hasOwnProperty(a)&&_b(a)},cc=function(a,b,c,d,e,f,g){var h,i=Db();ac(a);var j=function(){if(Zb[a]){if(h=Db()-i,h>=d)return _b(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),Zb[a].raf=J(j)}};j()},dc={shout:Cb,listen:Bb,viewportSize:rb,options:i,isMainScrollAnimating:function(){return gb},getZoomLevel:function(){return s},getCurrentIndex:function(){return m},isDragging:function(){return W},isZooming:function(){return bb},applyZoomPan:function(a,b,c){qb.x=b,qb.y=c,s=a,Gb()},init:function(){if(!j&&!k){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),L=a.className,j=!0,P=e.detectFeatures(),J=P.raf,K=P.caf,G=P.transform,N=P.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),n=f.container.style,f.itemHolders=A=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],A[0].el.style.display=A[2].el.style.display="none",Vb(),r={resize:f.updateSize,scroll:Yb,keydown:Wb,click:Xb};var d=P.isOldIOSPhone||P.isOldAndroid||P.isMobileOpera;for(P.animationName&&P.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<wb.length;c++)f["init"+wb[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Cb("firstUpdate"),m=m||i.index||0,(isNaN(m)||0>m||m>=_c())&&(m=0),f.currItem=$c(m),(P.isOldIOSPhone||P.isOldAndroid)&&(vb=!1),i.modal&&(a.setAttribute("aria-hidden","false"),vb?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===O&&(Cb("initialLayout"),O=M=e.getScrollY());var l="pswp--open ";for(i.mainClass&&(l+=i.mainClass+" "),i.showHideOpacity&&(l+="pswp--animate_opacity "),l+=I?"pswp--touch":"pswp--notouch",l+=P.animationName?" pswp--css_animation":"",l+=P.svg?" pswp--svg":"",e.addClass(a,l),f.updateSize(),o=-1,ub=null,c=0;h>c;c++)Ib((c+o)*tb.x,A[c].el.style);N||e.bind(f.scrollWrap,q,f),Bb("initialZoomInEnd",function(){f.setContent(A[0],m-1),f.setContent(A[2],m+1),A[0].el.style.display=A[2].el.style.display="block",i.focus&&a.focus(),Pb()}),f.setContent(A[1],m),f.updateCurrItem(),Cb("afterInit"),vb||(w=setInterval(function(){$b||W||bb||s!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){j&&(j=!1,k=!0,Cb("close"),Qb(),bd(f.currItem,null,!0,f.destroy))},destroy:function(){Cb("destroy"),Wc&&clearTimeout(Wc),i.modal&&(a.setAttribute("aria-hidden","true"),a.className=L),w&&clearInterval(w),e.unbind(f.scrollWrap,q,f),e.unbind(window,"scroll",f),yc(),bc(),Ab=null},panTo:function(a,b,c){c||(a>eb.min.x?a=eb.min.x:a<eb.max.x&&(a=eb.max.x),b>eb.min.y?b=eb.min.y:b<eb.max.y&&(b=eb.max.y)),qb.x=a,qb.y=b,Gb()},handleEvent:function(a){a=a||window.event,r[a.type]&&r[a.type](a)},goTo:function(a){a=zb(a);var b=a-m;ub=b,m=a,f.currItem=$c(m),sb-=b,Jb(tb.x*sb),bc(),gb=!1,f.updateCurrItem()},next:function(){f.goTo(m+1)},prev:function(){f.goTo(m-1)},updateCurrZoomItem:function(a){if(a&&Cb("beforeChange",0),A[1].el.children.length){var b=A[1].el.children[0];fb=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else fb=null;eb=f.currItem.bounds,t=s=f.currItem.initialZoomLevel,qb.x=eb.center.x,qb.y=eb.center.y,a&&Cb("afterChange")},invalidateCurrItems:function(){x=!0;for(var a=0;h>a;a++)A[a].item&&(A[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ub){var b,c=Math.abs(ub);if(!(a&&2>c)){f.currItem=$c(m),Cb("beforeChange",ub),c>=h&&(o+=ub+(ub>0?-h:h),c=h);for(var d=0;c>d;d++)ub>0?(b=A.shift(),A[h-1]=b,o++,Ib((o+2)*tb.x,b.el.style),f.setContent(b,m-c+d+1+1)):(b=A.pop(),A.unshift(b),o--,Ib(o*tb.x,b.el.style),f.setContent(b,m+c-d-1-1));if(fb&&1===Math.abs(ub)){var e=$c(B);e.initialZoomLevel!==s&&(hd(e,rb),Hb(e))}ub=0,f.updateCurrZoomItem(),B=m,Cb("afterChange")}}},updateSize:function(b){if(!vb){var c=e.getScrollY();if(O!==c&&(a.style.top=c+"px",O=c),!b&&xb.x===window.innerWidth&&xb.y===window.innerHeight)return;xb.x=window.innerWidth,xb.y=window.innerHeight,a.style.height=xb.y+"px"}if(rb.x=f.scrollWrap.clientWidth,rb.y=f.scrollWrap.clientHeight,y={x:0,y:O},tb.x=rb.x+Math.round(rb.x*i.spacing),tb.y=rb.y,Jb(tb.x*sb),Cb("beforeResize"),void 0!==o){for(var d,g,j,k=0;h>k;k++)d=A[k],Ib((k+o)*tb.x,d.el.style),j=zb(m+k-1),g=$c(j),x||g.needsUpdate||!g.bounds?(g&&f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):-1===d.index&&j>=0&&f.setContent(d,j),g&&g.container&&(hd(g,rb),Hb(g));x=!1}t=s=f.currItem.initialZoomLevel,eb=f.currItem.bounds,eb&&(qb.x=eb.center.x,qb.y=eb.center.y,Gb()),Cb("resize")},zoomTo:function(a,b,c,d,f){b&&(t=s,tc.x=Math.abs(b.x)-qb.x,tc.y=Math.abs(b.y)-qb.y,Lb(pb,qb));var g=Rb(a,!1),h={};Ub("x",g,h,a),Ub("y",g,h,a);var i=s,j={x:qb.x,y:qb.y};Mb(h);var k=function(b){1===b?(s=a,qb.x=h.x,qb.y=h.y):(s=(a-i)*b+i,qb.x=(h.x-j.x)*b+j.x,qb.y=(h.y-j.y)*b+j.y),f&&f(b),Gb()};c?cc("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},ec=30,fc=10,gc={},hc={},ic={},jc={},kc={},lc=[],mc={},nc=[],oc={},pc=0,qc=nb(),rc=0,sc=nb(),tc=nb(),uc=nb(),vc=function(a,b){return a.x===b.x&&a.y===b.y},wc=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},xc=function(a,b){return oc.x=Math.abs(a.x-b.x),oc.y=Math.abs(a.y-b.y),Math.sqrt(oc.x*oc.x+oc.y*oc.y)},yc=function(){$&&(K($),$=null)},zc=function(){W&&($=J(zc),Pc())},Ac=function(){return!("fit"===i.scaleMode&&s===f.currItem.initialZoomLevel)},Bc=function(a,b){return a?a.className&&a.className.indexOf("pswp__scroll-wrap")>-1?!1:b(a)?a:Bc(a.parentNode,b):!1},Cc={},Dc=function(a,b){return Cc.prevent=!Bc(a.target,i.isClickableElement),Cb("preventDragEvent",a,b,Cc),Cc.prevent},Ec=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Fc=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Gc=function(a,b,c){if(a-R>50){var d=nc.length>2?nc.shift():{};d.x=b,d.y=c,nc.push(d),R=a}},Hc=function(){var a=qb.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(rb.y/2))},Ic={},Jc={},Kc=[],Lc=function(a){for(;Kc.length>0;)Kc.pop();return H?(mb=0,lc.forEach(function(a){0===mb?Kc[0]=a:1===mb&&(Kc[1]=a),mb++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Kc[0]=Ec(a.touches[0],Ic),a.touches.length>1&&(Kc[1]=Ec(a.touches[1],Jc))):(Ic.x=a.pageX,Ic.y=a.pageY,Ic.id="",Kc[0]=Ic),Kc},Mc=function(a,b){var c,d,e,g,h=0,j=qb[a]+b[a],k=b[a]>0,l=sc.x+b.x,m=sc.x-mc.x;return c=j>eb.min[a]||j<eb.max[a]?i.panEndFriction:1,j=qb[a]+b[a]*c,!i.allowPanToNext&&s!==f.currItem.initialZoomLevel||(fb?"h"!==hb||"x"!==a||Y||(k?(j>eb.min[a]&&(c=i.panEndFriction,h=eb.min[a]-j,d=eb.min[a]-pb[a]),(0>=d||0>m)&&_c()>1?(g=l,0>m&&l>mc.x&&(g=mc.x)):eb.min.x!==eb.max.x&&(e=j)):(j<eb.max[a]&&(c=i.panEndFriction,h=j-eb.max[a],d=pb[a]-eb.max[a]),(0>=d||m>0)&&_c()>1?(g=l,m>0&&l<mc.x&&(g=mc.x)):eb.min.x!==eb.max.x&&(e=j))):g=l,"x"!==a)?void(gb||_||s>f.currItem.fitRatio&&(qb[a]+=b[a]*c)):(void 0!==g&&(Jb(g,!0),_=g===mc.x?!1:!0),eb.min.x!==eb.max.x&&(void 0!==e?qb.x=e:_||(qb.x+=b.x*c)),void 0!==g)},Nc=function(a){if(!("mousedown"===a.type&&a.button>0)){if(Zc)return void a.preventDefault();if(!V||"mousedown"!==a.type){if(Dc(a,!0)&&a.preventDefault(),Cb("pointerDown"),H){var b=e.arraySearch(lc,a.pointerId,"id");0>b&&(b=lc.length),lc[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Lc(a),d=c.length;ab=null,bc(),W&&1!==d||(W=ib=!0,e.bind(window,p,f),T=lb=jb=U=_=Z=X=Y=!1,hb=null,Cb("firstTouchStart",c),Lb(pb,qb),ob.x=ob.y=0,Lb(jc,c[0]),Lb(kc,jc),mc.x=tb.x*sb,nc=[{x:jc.x,y:jc.y}],R=Q=Db(),Rb(s,!0),yc(),zc()),!bb&&d>1&&!gb&&!_&&(t=s,Y=!1,bb=X=!0,ob.y=ob.x=0,Lb(pb,qb),Lb(gc,c[0]),Lb(hc,c[1]),Fc(gc,hc,uc),tc.x=Math.abs(uc.x)-qb.x,tc.y=Math.abs(uc.y)-qb.y,cb=db=xc(gc,hc))}}},Oc=function(a){if(a.preventDefault(),H){var b=e.arraySearch(lc,a.pointerId,"id");if(b>-1){var c=lc[b];c.x=a.pageX,c.y=a.pageY}}if(W){var d=Lc(a);if(hb||Z||bb)ab=d;else{var f=Math.abs(d[0].x-jc.x)-Math.abs(d[0].y-jc.y);Math.abs(f)>=fc&&(hb=f>0?"h":"v",ab=d)}}},Pc=function(){if(ab){var a=ab.length;if(0!==a)if(Lb(gc,ab[0]),ic.x=gc.x-jc.x,ic.y=gc.y-jc.y,bb&&a>1){if(jc.x=gc.x,jc.y=gc.y,!ic.x&&!ic.y&&vc(ab[1],hc))return;Lb(hc,ab[1]),Y||(Y=!0,Cb("zoomGestureStarted"));var b=xc(gc,hc),c=Uc(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(lb=!0);var d=1,e=Sb(),g=Tb();if(e>c)if(i.pinchToClose&&!lb&&t<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);Eb(j),Cb("onPinchClose",j),jb=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);0>d&&(d=0),cb=b,Fc(gc,hc,qc),ob.x+=qc.x-uc.x,ob.y+=qc.y-uc.y,Lb(uc,qc),qb.x=Kb("x",c),qb.y=Kb("y",c),T=c>s,s=c,Gb()}else{if(!hb)return;if(ib&&(ib=!1,Math.abs(ic.x)>=fc&&(ic.x-=ab[0].x-kc.x),Math.abs(ic.y)>=fc&&(ic.y-=ab[0].y-kc.y)),jc.x=gc.x,jc.y=gc.y,0===ic.x&&0===ic.y)return;if("v"===hb&&i.closeOnVerticalDrag&&!Ac()){ob.y+=ic.y,qb.y+=ic.y;var k=Hc();return U=!0,Cb("onVerticalDrag",k),Eb(k),void Gb()}Gc(Db(),gc.x,gc.y),Z=!0,eb=f.currItem.bounds;var l=Mc("x",ic);l||(Mc("y",ic),Mb(qb),Gb())}}},Qc=function(a){if(P.isOldAndroid){if(V&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(V),V=setTimeout(function(){V=0},600))}Cb("pointerUp"),Dc(a,!1)&&a.preventDefault();var b;if(H){var c=e.arraySearch(lc,a.pointerId,"id");if(c>-1)if(b=lc.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Lc(a),i=h.length;if("mouseup"===a.type&&(i=0),2===i)return ab=null,!0;1===i&&Lb(kc,h[0]),0!==i||hb||gb||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Cb("touchRelease",a,b));var j=-1;if(0===i&&(W=!1,e.unbind(window,p,f),yc(),bb?j=0:-1!==rc&&(j=Db()-rc)),rc=1===i?Db():-1,g=-1!==j&&150>j?"zoom":"swipe",bb&&2>i&&(bb=!1,1===i&&(g="zoomPointerUp"),Cb("zoomGestureEnded")),ab=null,Z||Y||gb||U)if(bc(),S||(S=Rc()),S.calculateSwipeSpeed("x"),U){var k=Hc();if(.6>k)f.close();else{var l=qb.y,m=kb;cc("verticalDrag",0,1,300,e.easing.cubic.out,function(a){qb.y=(f.currItem.initialPosition.y-l)*a+l,Eb((1-m)*a+m),Gb()}),Cb("onVerticalDrag",1)}}else{if((_||gb)&&0===i){var n=Tc(g,S);if(n)return;g="zoomPointerUp"}if(!gb)return"swipe"!==g?void Vc():void(!_&&s>f.currItem.fitRatio&&Sc(S))}},Rc=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){nc.length>1?(a=Db()-R+50,b=nc[nc.length-2][d]):(a=Db()-Q,b=kc[d]),c.lastFlickOffset[d]=jc[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickSpeed[d]=c.lastFlickDist[d]>20?c.lastFlickOffset[d]/a:0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(qb[a]>eb.min[a]?c.backAnimDestination[a]=eb.min[a]:qb[a]<eb.max[a]&&(c.backAnimDestination[a]=eb.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,cc("bounceZoomPan"+a,qb[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){qb[a]=b,Gb()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,qb[a]+=c.distanceOffset[a])},panAnimLoop:function(){return Zb.zoomPan&&(Zb.zoomPan.raf=J(c.panAnimLoop),c.now=Db(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Gb(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05)?(qb.x=Math.round(qb.x),qb.y=Math.round(qb.y),Gb(),void _b("zoomPan")):void 0}};return c},Sc=function(a){return a.calculateSwipeSpeed("y"),eb=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(ac("zoomPan"),a.lastNow=Db(),void a.panAnimLoop())},Tc=function(a,b){var c;gb||(pc=m);var d;if("swipe"===a){var g=jc.x-kc.x,h=b.lastFlickDist.x<10;g>ec&&(h||b.lastFlickOffset.x>20)?d=-1:-ec>g&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(m+=d,0>m?(m=i.loop?_c()-1:0,j=!0):m>=_c()&&(m=i.loop?0:_c()-1,j=!0),(!j||i.loop)&&(ub+=d,sb-=d,c=!0));var k,l=tb.x*sb,n=Math.abs(l-sc.x);return c||l>sc.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,pc===m&&(c=!1),gb=!0,cc("mainScroll",sc.x,l,k,e.easing.cubic.out,Jb,function(){bc(),gb=!1,pc=-1,(c||pc!==m)&&f.updateCurrItem(),Cb("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Uc=function(a){return 1/db*a*t},Vc=function(){var a=s,b=Sb(),c=Tb();b>s?a=b:s>c&&(a=c);var d,g=1,h=kb;return jb&&!T&&!lb&&b>s?(f.close(),!0):(jb&&(d=function(a){Eb((g-h)*a+h)}),f.zoomTo(a,0,300,e.easing.cubic.out,d),!0)};yb("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){C=a+b,D=a+c,E=a+d,F=e?a+e:""};H=P.pointerEvent,H&&P.touch&&(P.touch=!1),H?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):P.touch?(a("touch","start","move","end","cancel"),I=!0):a("mouse","down","move","up"),p=D+" "+E+" "+F,q=C,H&&!I&&(I=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=I,r[C]=Nc,r[D]=Oc,r[E]=Qc,F&&(r[F]=r[E]),P.touch&&(q+=" mousedown",p+=" mousemove mouseup",r.mousedown=r[C],r.mousemove=r[D],r.mouseup=r[E]),I||(i.allowPanToNext=!1)}}});var Wc,Xc,Yc,Zc,$c,_c,ad,bd=function(b,c,d,g){Wc&&clearTimeout(Wc),Zc=!0,Yc=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(m);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){_b("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Eb(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Cb("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),Zc=!1};if(!j||!h||void 0===h.x){var n=function(){Cb("initialZoom"+(d?"Out":"In")),s=b.initialZoomLevel,Lb(qb,b.initialPosition),Gb(),a.style.opacity=d?0:1,Eb(1),k()};return void n()}var o=function(){var c=l,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(s=h.w/b.w,qb.x=h.x,qb.y=h.y-M,f[g?"template":"bg"].style.opacity=.001,Gb()),ac("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Wc=setTimeout(function(){if(Cb("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:qb.x,y:qb.y},l=s,m=M,n=kb,o=function(b){z&&(m=e.getScrollY(),z=!1),1===b?(s=f,qb.x=h.x,qb.y=h.y-m):(s=(f-l)*b+l,qb.x=(h.x-i.x)*b+i.x,qb.y=(h.y-m-i.y)*b+i.y),Gb(),g?a.style.opacity=1-b:Eb(n-b*n)};c?cc("initialZoom",0,1,j,e.easing.cubic.out,o,k):(o(1),Wc=setTimeout(k,j+20))}else s=b.initialZoomLevel,Lb(qb,b.initialPosition),Gb(),Eb(1),g?a.style.opacity=1:Eb(1),Wc=setTimeout(k,j+20)},d?25:90)};o()},cd={},dd=[],ed={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xc.length}},fd=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},gd=function(a,b,c){var d=a.bounds;d.center.x=Math.round((cd.x-b)/2),d.center.y=Math.round((cd.y-c)/2)+a.vGap.top,d.max.x=b>cd.x?Math.round(cd.x-b):d.center.x,d.max.y=c>cd.y?Math.round(cd.y-c)+a.vGap.top:d.center.y,d.min.x=b>cd.x?0:d.center.x,d.min.y=c>cd.y?a.vGap.top:d.center.y},hd=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Cb("parseVerticalMargin",a)),cd.x=b.x,cd.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=cd.x/a.w,f=cd.y/a.h;a.fitRatio=f>e?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=fd())}if(!c)return;return gd(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=fd(),a.initialPosition=a.bounds.center,a.bounds},id=function(a,b,c,d,e,g){if(!b.loadError){var h,j=f.isDragging()&&!f.isZooming(),k=a===m||f.isMainScrollAnimating()||j;!e&&(I||i.alwaysFadeIn)&&k&&(h=!0),d&&(h&&(d.style.opacity=0),b.imageAppended=!0,c.appendChild(d),h&&setTimeout(function(){d.style.opacity=1,g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500)},50))}},jd=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},kd=function(a,b){return a.src&&a.loadError&&a.container?(b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0):void 0},ld=function(){if(dd.length){for(var a,b=0;b<dd.length;b++)a=dd[b],a.holder.index===a.index&&id(a.index,a.item,a.baseDiv,a.img);dd=[]}};yb("Controller",{publicMethods:{lazyLoadItem:function(a){a=zb(a);var b=$c(a);b&&b.src&&!b.loaded&&!b.loading&&(Cb("gettingData",a,b),jd(b))},initController:function(){e.extend(i,ed,!0),f.items=Xc=c,$c=f.getItemAt,_c=i.getNumItemsFn,ad=i.loop,_c()<3&&(i.loop=!1),Bb("beforeChange",function(a){var b,c=i.preload,d=null===a?!0:a>0,e=Math.min(c[0],_c()),g=Math.min(c[1],_c());for(b=1;(d?g:e)>=b;b++)f.lazyLoadItem(m+b);for(b=1;(d?e:g)>=b;b++)f.lazyLoadItem(m-b)}),Bb("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(m)}),Bb("mainScrollAnimComplete",ld),Bb("initialZoomInEnd",ld),Bb("destroy",function(){for(var a,b=0;b<Xc.length;b++)a=Xc[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);dd=null})},getItemAt:function(a){return a>=0&&void 0!==Xc[a]?Xc[a]:!1},allowProgressiveImg:function(){return i.forceProgressiveLoading||!I||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=zb(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Cb("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),kd(g),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.webkitBackfaceVisibility="hidden",d.style.opacity=1,d.src=g.src,id(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(j){if(c.img.style.webkitBackfaceVisibility="hidden",a&&a.index===b){if(kd(c,!0))return c.loadComplete=c.img=null,hd(c,rb),Hb(c),void(a.index===m&&f.updateCurrZoomItem());c.imageAppended?!Zc&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):P.transform&&(gb||Zc)?dd.push({item:c,baseDiv:h,img:c.img,index:b,holder:a}):id(b,c,h,c.img,gb||Zc)}c.loadComplete=null,c.img=null,Cb("imageLoadComplete",b,c)}},e.features.transform){var k="pswp__img pswp__img--placeholder";k+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(k,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),l.style.width=g.w+"px",l.style.height=g.h+"px",h.appendChild(l),g.placeholder=l}g.loading||jd(g),f.allowProgressiveImg()&&(!Yc&&P.transform?dd.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):id(b,g,h,g.img,!0,!0))}hd(g,rb),Yc||b!==m?Hb(g):(fb=h.style,bd(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var md,nd={},od=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};yb("Tap",{publicMethods:{initTap:function(){Bb("firstTouchStart",f.onTapStart),Bb("touchRelease",f.onTapRelease),Bb("destroy",function(){nd={},md=null})},onTapStart:function(a){a.length>1&&(clearTimeout(md),md=null)},onTapRelease:function(a,b){if(b&&!Z&&!X&&!$b){var c=b;if(md&&(clearTimeout(md),md=null,wc(c,nd)))return void Cb("doubleTap",c);if("mouse"===b.type)return void od(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void od(a,b);Lb(nd,c),md=setTimeout(function(){od(a,b),md=null},300)}}}});var pd;yb("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(I?Bb("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){pd={};var c="wheel mousewheel DOMMouseScroll";Bb("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Bb("unbindEvents",function(){pd&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),1>s?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Bb("resize",g),Bb("afterChange",g),Bb("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Bb("pointerUp",h),b||g()},handleMouseWheel:function(a){if(s<=f.currItem.fitRatio)return i.closeOnScroll||a.preventDefault(),!0;if(a.preventDefault(),a.stopPropagation(),pd.x=0,"deltaX"in a)pd.x=a.deltaX,pd.y=a.deltaY;else if("wheelDelta"in a)a.wheelDeltaX&&(pd.x=-.16*a.wheelDeltaX),pd.y=a.wheelDeltaY?-.16*a.wheelDeltaY:-.16*a.wheelDelta;else{if(!("detail"in a))return;pd.y=a.detail}Rb(s,!0),f.panTo(qb.x-pd.x,qb.y-pd.y)},toggleDesktopZoom:function(b){b=b||{x:rb.x/2,y:rb.y/2+M};var c=i.getDoubleTapZoom(!0,f.currItem),d=s===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var qd,rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd={history:!0,galleryUID:1},Dd=function(){return Ad.hash.substring(1)},Ed=function(){qd&&clearTimeout(qd),sd&&clearTimeout(sd)},Fd=function(){var a=Dd(),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.pid=parseInt(b.pid,10)-1,b.pid<0&&(b.pid=0),b},Gd=function(){if(sd&&clearTimeout(sd),$b||W)return void(sd=setTimeout(Gd,500));td?clearTimeout(rd):td=!0;var a=wd+"&gid="+i.galleryUID+"&pid="+(m+1);xd||-1===Ad.hash.indexOf(a)&&(zd=!0);var b=Ad.href.split("#")[0]+"#"+a;Bd?"#"+a!==window.location.hash&&history[xd?"replaceState":"pushState"]("",document.title,b):xd?Ad.replace(b):Ad.hash=a,xd=!0,rd=setTimeout(function(){td=!1},60)};yb("History",{publicMethods:{initHistory:function(){if(e.extend(i,Cd,!0),i.history){Ad=window.location,zd=!1,yd=!1,xd=!1,wd=Dd(),Bd="pushState"in history,wd.indexOf("gid=")>-1&&(wd=wd.split("&gid=")[0],wd=wd.split("?gid=")[0]),Bb("afterChange",f.updateURL),Bb("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){vd=!0,yd||(zd?history.back():wd?Ad.hash=wd:Bd?history.pushState("",document.title,Ad.pathname+Ad.search):Ad.hash=""),Ed()};Bb("unbindEvents",function(){l&&a()}),Bb("destroy",function(){vd||a()}),Bb("firstUpdate",function(){m=Fd().pid});var b=wd.indexOf("pid=");b>-1&&(wd=wd.substring(0,b),"&"===wd.slice(-1)&&(wd=wd.slice(0,-1))),setTimeout(function(){j&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Dd()===wd?(yd=!0,void f.close()):void(td||(ud=!0,f.goTo(Fd().pid),ud=!1))},updateURL:function(){Ed(),ud||(xd?qd=setTimeout(Gd,800):Gd())}}}),e.extend(f,dc)};return a});
},{}],3:[function(require,module,exports){
var Dega = require('dega'),

    $_searchPanel = document.querySelector('.search'),
    $_searchForm = document.querySelector('.search__form'),
    $_searchInput = document.querySelector('.search__input'),
    $_searchClose = document.querySelector('.search__close'),

    _close = function() {
        $_searchPanel.classList.remove('-active');
        $_searchInput.blur();
        $_searchInput.value = '';
    };

module.exports = function() {

    Dega(document).on('click', '.search-trigger', function(e) {
        e.preventDefault();

        $_searchPanel.classList.add('-active');
        $_searchInput.focus();
    });

    $_searchForm.addEventListener('submit', function(e) {
        $_searchInput.value = 'site:sysoev.org ' + $_searchInput.value;

        setTimeout(function() {
            _close();
        }, 50);
    });

    $_searchClose.addEventListener('click', function(e) {
        _close();
    });

    document.addEventListener('keydown', function(e) {
        if (e.keyCode === 27) {
            _close();
        }
    });

};

},{"dega":5}],4:[function(require,module,exports){
require('../components/_search/_search.js')();

var PhotoSwipe = require('../components/_photoswipe/photoswipe.min.js'),
    PhotoSwipeUI_Default = require('../components/_photoswipe/photoswipe-ui-default.min.js'),
    Dega = require('dega'),

    pswpElement = document.querySelector('.pswp'),

    openPhotoSwipe = function(e) {
        e.preventDefault();

        var item, size, gallery;

        size = this.getAttribute('data-size').split('x');

        items = [{
            src: this.href,
            w: size[0],
            h: size[1],
            title: this.getAttribute('data-desc')
        }];

        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {});
        gallery.init();
    };

Dega(document).on('click', '.lightbox-target', openPhotoSwipe);

},{"../components/_photoswipe/photoswipe-ui-default.min.js":1,"../components/_photoswipe/photoswipe.min.js":2,"../components/_search/_search.js":3,"dega":5}],5:[function(require,module,exports){
/**
 * @author Stanislav Sysoev <@d4rkr00t>
 * @license MIT
 * @version 0.1.0
 *
 * @description
 * Event delegation library on plain JavaScript
 */

(function(root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(factory);
    } else if (typeof exports === 'object') {
        module.exports = factory();
    } else {
        root.Dega = factory();
    }
})(this, function() {
    var _instances = [];

    /**
     * Check if elem matches to selector
     * @private
     * @param {Object} el
     * @param {String} selector — .class | #id | div
     * @return {Boolean|Undefined}
     */
    function _matchElem(el, selector) {
        if (selector.match(/^\./)) {
            return el.classList && el.classList.contains(selector.replace(/^\./, ''));
        } else if (selector.match(/^#/)) {
            return el.id === selector.replace(/^#/, '');
        } else {
            return el.tagName === selector.toUpperCase();
        }
    }

    /**
     * Search for generated event listener by original
     * @private
     * @param {Array} eventListeners — list of event listeners
     * @param {String} type — event type like 'click' | 'focus' | 'blur'
     * @param {String} selector — .class | #id | div
     * @param {Function} callback — user passed callback
     * @param {Boolean} useCapture
     * @return {Object|Boolean}
     */
    function _findEventListener(eventListeners, type, selector, callback, useCapture) {
        for (var i = 0; i < eventListeners.length; i++) {
            if (eventListeners[i].original === callback &&
                eventListeners[i].useCapture === useCapture &&
                eventListeners[i].type === type &&
                eventListeners[i].selector === selector) {
                return eventListeners[i];
            }
        }

        return false;
    }

    /**
     * Generates useCapture for event listeners, if blur or focus we should always use useCapture
     * @private
     * @param {String} type — event type like 'click' | 'focus' | 'blur'
     * @param {Boolean} useCapture — user defined useCapture
     * @return {Boolean}
     */
    function _generateUseCapture(type, useCapture) {
        return type === 'blur' || type === 'focus' || useCapture;
    }

    /**
     * Generates eventListener item for Dega._eventListeners list
     * @param {String} type — event type like 'click' | 'focus' | 'blur'
     * @param {String} selector — .class | #id | div
     * @param {Function} callback — user passed callback
     * @param {Boolean} useCapture
     */
    function _generateEventListener(type, selector, callback, useCapture) {
        return {
            type: type,
            selector: selector,
            useCapture: _generateUseCapture(type, useCapture),

            original: callback,
            generated: function(e) {
                var el = e.target;

                while (el) {
                    if (_matchElem(el, selector)) {
                        callback.call(el, e);
                        break;
                    } else {
                        el = el.parentNode;
                    }
                }
            }
        };
    }
    /**
     * Creates a new Dega Instance
     * @class
     * @param {DomElem|String} elem — dom elem or selector for document.querySelector
     */
    var Dega = function(elem) {
        if (typeof elem === 'string') {
            elem = document.querySelector(elem);
        }

        if (!(this instanceof Dega)) {
            for (var i = 0; i < _instances.length; i++) {
                if (_instances[i].elem === elem) {
                    return _instances[i];
                }
            }

            var dega = new Dega(elem);
            _instances.push(dega);
            return dega;
        }

        this.elem = elem;
        this._eventListeners = [];
    };

    /**
     * Subscribe on event
     * @param {String} type — event type like 'click' | 'focus' | 'blur'
     * @param {String} selector — .class | #id | div
     * @param {Function} callback — user passed callback
     * @param {Boolean} [useCapture]
     * @return {Dega} this
     */
    Dega.prototype.on = function(type, selector, callback, useCapture) {
        var eventListener = _generateEventListener(type, selector, callback, useCapture);

        this._eventListeners.push(eventListener);
        this.elem.addEventListener(type, eventListener.generated, eventListener.useCapture);

        return this;
    };

    /**
     * Unsubscribe from event
     * @param {String} type — event type like 'click' | 'focus' | 'blur'
     * @param {String} selector — .class | #id | div
     * @param {Function} callback — user passed callback
     * @param  {Boolean} [useCapture]
     * @return {Dega} this
     */
    Dega.prototype.off = function(type, selector, callback, useCapture) {
        useCapture = _generateUseCapture(type, useCapture);

        var eventListener = _findEventListener(this._eventListeners, type, selector, callback, useCapture);

        if (eventListener) {
            this.elem.removeEventListener(type, eventListener.generated, eventListener.useCapture);

            this._eventListeners.splice(this._eventListeners.indexOf(eventListener), 1);
        }

        return this;
    };

    return Dega;
});

},{}]},{},[4])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zeXNvZXYvRGV2ZWxvcG1lbnQvSmF2YVNjcmlwdC9zeXNvZXYub3JnL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9zeXNvZXYvRGV2ZWxvcG1lbnQvSmF2YVNjcmlwdC9zeXNvZXYub3JnL19sYXlvdXQtc3JjL2NvbXBvbmVudHMvX3Bob3Rvc3dpcGUvcGhvdG9zd2lwZS11aS1kZWZhdWx0Lm1pbi5qcyIsIi9Vc2Vycy9zeXNvZXYvRGV2ZWxvcG1lbnQvSmF2YVNjcmlwdC9zeXNvZXYub3JnL19sYXlvdXQtc3JjL2NvbXBvbmVudHMvX3Bob3Rvc3dpcGUvcGhvdG9zd2lwZS5taW4uanMiLCIvVXNlcnMvc3lzb2V2L0RldmVsb3BtZW50L0phdmFTY3JpcHQvc3lzb2V2Lm9yZy9fbGF5b3V0LXNyYy9jb21wb25lbnRzL19zZWFyY2gvX3NlYXJjaC5qcyIsIi9Vc2Vycy9zeXNvZXYvRGV2ZWxvcG1lbnQvSmF2YVNjcmlwdC9zeXNvZXYub3JnL19sYXlvdXQtc3JjL2pzL2Zha2VfNTIyZjIwZjMuanMiLCIvVXNlcnMvc3lzb2V2L0RldmVsb3BtZW50L0phdmFTY3JpcHQvc3lzb2V2Lm9yZy9ub2RlX21vZHVsZXMvZGVnYS9kZWdhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiEgUGhvdG9Td2lwZSBEZWZhdWx0IFVJIC0gNC4wLjMgLSAyMDE1LTAxLTAzXG4qIGh0dHA6Ly9waG90b3N3aXBlLmNvbVxuKiBDb3B5cmlnaHQgKGMpIDIwMTUgRG1pdHJ5IFNlbWVub3Y7ICovXG4hZnVuY3Rpb24oYSxiKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGIpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWIoKTphLlBob3RvU3dpcGVVSV9EZWZhdWx0PWIoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBhPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHUsdj10aGlzLHc9ITEseD0hMCx5PSEwLHo9e2JhcnNTaXplOnt0b3A6NDQsYm90dG9tOlwiYXV0b1wifSxjbG9zZUVsQ2xhc3NlczpbXCJpdGVtXCIsXCJjYXB0aW9uXCIsXCJ6b29tLXdyYXBcIixcInVpXCIsXCJ0b3AtYmFyXCJdLHRpbWVUb0lkbGU6NGUzLHRpbWVUb0lkbGVPdXRzaWRlOjFlMyxsb2FkaW5nSW5kaWNhdG9yRGVsYXk6MWUzLGFkZENhcHRpb25IVE1MRm46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50aXRsZT8oYi5jaGlsZHJlblswXS5pbm5lckhUTUw9YS50aXRsZSwhMCk6KGIuY2hpbGRyZW5bMF0uaW5uZXJIVE1MPVwiXCIsITEpfSxjbG9zZUVsOiEwLGNhcHRpb25FbDohMCxmdWxsc2NyZWVuRWw6ITAsem9vbUVsOiEwLHNoYXJlRWw6ITAsY291bnRlckVsOiEwLGFycm93RWw6ITAscHJlbG9hZGVyRWw6ITAsdGFwVG9DbG9zZTohMSx0YXBUb1RvZ2dsZUNvbnRyb2xzOiEwLHNoYXJlQnV0dG9uczpbe2lkOlwiZmFjZWJvb2tcIixsYWJlbDpcIlNoYXJlIG9uIEZhY2Vib29rXCIsdXJsOlwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwP3U9e3t1cmx9fVwifSx7aWQ6XCJ0d2l0dGVyXCIsbGFiZWw6XCJUd2VldFwiLHVybDpcImh0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0P3RleHQ9e3t0ZXh0fX0mdXJsPXt7dXJsfX1cIn0se2lkOlwicGludGVyZXN0XCIsbGFiZWw6XCJQaW4gaXRcIix1cmw6XCJodHRwOi8vd3d3LnBpbnRlcmVzdC5jb20vcGluL2NyZWF0ZS9idXR0b24vP3VybD17e3VybH19Jm1lZGlhPXt7aW1hZ2VfdXJsfX0mZGVzY3JpcHRpb249e3t0ZXh0fX1cIn0se2lkOlwiZG93bmxvYWRcIixsYWJlbDpcIkRvd25sb2FkIGltYWdlXCIsdXJsOlwie3tyYXdfaW1hZ2VfdXJsfX1cIixkb3dubG9hZDohMH1dLGdldEltYWdlVVJMRm9yU2hhcmU6ZnVuY3Rpb24oKXtyZXR1cm4gYS5jdXJySXRlbS5zcmN8fFwiXCJ9LGdldFBhZ2VVUkxGb3JTaGFyZTpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sZ2V0VGV4dEZvclNoYXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuY3Vyckl0ZW0udGl0bGV8fFwiXCJ9LGluZGV4SW5kaWNhdG9yU2VwOlwiIC8gXCJ9LEE9ZnVuY3Rpb24oYSl7aWYocilyZXR1cm4hMDthPWF8fHdpbmRvdy5ldmVudDtmb3IodmFyIGMsZCxlPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsZj1lLmNsYXNzTmFtZSxnPTA7ZzxTLmxlbmd0aDtnKyspYz1TW2ddLGMub25UYXAmJmYuaW5kZXhPZihcInBzd3BfX1wiK2MubmFtZSk+LTEmJihjLm9uVGFwKCksZD0hMCk7aWYoZCl7YS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCkscj0hMDt2YXIgaD1iLmZlYXR1cmVzLmlzT2xkQW5kcm9pZD82MDA6MzA7cz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cj0hMX0saCl9fSxCPWZ1bmN0aW9uKCl7cmV0dXJuIWEubGlrZWx5VG91Y2hEZXZpY2V8fHEubW91c2VVc2VkfHxzY3JlZW4ud2lkdGg+MTIwMH0sQz1mdW5jdGlvbihhLGMsZCl7YlsoZD9cImFkZFwiOlwicmVtb3ZlXCIpK1wiQ2xhc3NcIl0oYSxcInBzd3BfX1wiK2MpfSxEPWZ1bmN0aW9uKCl7dmFyIGE9MT09PXEuZ2V0TnVtSXRlbXNGbigpO2EhPT1wJiYoQyhkLFwidWktLW9uZS1zbGlkZVwiLGEpLHA9YSl9LEU9ZnVuY3Rpb24oKXtDKGksXCJzaGFyZS1tb2RhbC0taGlkZGVuXCIseSl9LEY9ZnVuY3Rpb24oKXtyZXR1cm4geT0heSx5PyhiLnJlbW92ZUNsYXNzKGksXCJwc3dwX19zaGFyZS1tb2RhbC0tZmFkZS1pblwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eSYmRSgpfSwzMDApKTooRSgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt5fHxiLmFkZENsYXNzKGksXCJwc3dwX19zaGFyZS1tb2RhbC0tZmFkZS1pblwiKX0sMzApKSx5fHxIKCksITF9LEc9ZnVuY3Rpb24oYil7Yj1ifHx3aW5kb3cuZXZlbnQ7dmFyIGM9Yi50YXJnZXR8fGIuc3JjRWxlbWVudDtyZXR1cm4gYS5zaG91dChcInNoYXJlTGlua0NsaWNrXCIsYixjKSxjLmhyZWY/Yy5oYXNBdHRyaWJ1dGUoXCJkb3dubG9hZFwiKT8hMDood2luZG93Lm9wZW4oYy5ocmVmLFwicHN3cF9zaGFyZVwiLFwic2Nyb2xsYmFycz15ZXMscmVzaXphYmxlPXllcyx0b29sYmFyPW5vLGxvY2F0aW9uPXllcyx3aWR0aD01NTAsaGVpZ2h0PTQyMCx0b3A9MTAwLGxlZnQ9XCIrKHdpbmRvdy5zY3JlZW4/TWF0aC5yb3VuZChzY3JlZW4ud2lkdGgvMi0yNzUpOjEwMCkpLHl8fEYoKSwhMSk6ITF9LEg9ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjLGQsZSxmPVwiXCIsZz0wO2c8cS5zaGFyZUJ1dHRvbnMubGVuZ3RoO2crKylhPXEuc2hhcmVCdXR0b25zW2ddLGM9cS5nZXRJbWFnZVVSTEZvclNoYXJlKGEpLGQ9cS5nZXRQYWdlVVJMRm9yU2hhcmUoYSksZT1xLmdldFRleHRGb3JTaGFyZShhKSxiPWEudXJsLnJlcGxhY2UoXCJ7e3VybH19XCIsZW5jb2RlVVJJQ29tcG9uZW50KGQpKS5yZXBsYWNlKFwie3tpbWFnZV91cmx9fVwiLGVuY29kZVVSSUNvbXBvbmVudChjKSkucmVwbGFjZShcInt7cmF3X2ltYWdlX3VybH19XCIsYykucmVwbGFjZShcInt7dGV4dH19XCIsZW5jb2RlVVJJQ29tcG9uZW50KGUpKSxmKz0nPGEgaHJlZj1cIicrYisnXCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJwc3dwX19zaGFyZS0tJythLmlkKydcIicrKGEuZG93bmxvYWQ/XCJkb3dubG9hZFwiOlwiXCIpK1wiPlwiK2EubGFiZWwrXCI8L2E+XCIscS5wYXJzZVNoYXJlQnV0dG9uT3V0JiYoZj1xLnBhcnNlU2hhcmVCdXR0b25PdXQoYSxmKSk7aS5jaGlsZHJlblswXS5pbm5lckhUTUw9ZixpLmNoaWxkcmVuWzBdLm9uY2xpY2s9R30sST1mdW5jdGlvbihhKXtmb3IodmFyIGM9MDtjPHEuY2xvc2VFbENsYXNzZXMubGVuZ3RoO2MrKylpZihiLmhhc0NsYXNzKGEsXCJwc3dwX19cIitxLmNsb3NlRWxDbGFzc2VzW2NdKSlyZXR1cm4hMH0sSj0wLEs9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodSksSj0wLGsmJnYuc2V0SWRsZSghMSl9LEw9ZnVuY3Rpb24oYSl7YT1hP2E6d2luZG93LmV2ZW50O3ZhciBiPWEucmVsYXRlZFRhcmdldHx8YS50b0VsZW1lbnQ7YiYmXCJIVE1MXCIhPT1iLm5vZGVOYW1lfHwoY2xlYXJUaW1lb3V0KHUpLHU9c2V0VGltZW91dChmdW5jdGlvbigpe3Yuc2V0SWRsZSghMCl9LHEudGltZVRvSWRsZU91dHNpZGUpKX0sTT1mdW5jdGlvbigpe3EuZnVsbHNjcmVlbkVsJiYoY3x8KGM9di5nZXRGdWxsc2NyZWVuQVBJKCkpLGM/KGIuYmluZChkb2N1bWVudCxjLmV2ZW50Syx2LnVwZGF0ZUZ1bGxzY3JlZW4pLHYudXBkYXRlRnVsbHNjcmVlbigpLGIuYWRkQ2xhc3MoYS50ZW1wbGF0ZSxcInBzd3AtLXN1cHBvcnRzLWZzXCIpKTpiLnJlbW92ZUNsYXNzKGEudGVtcGxhdGUsXCJwc3dwLS1zdXBwb3J0cy1mc1wiKSl9LE49ZnVuY3Rpb24oKXtxLnByZWxvYWRlckVsJiYoTyghMCksbChcImJlZm9yZUNoYW5nZVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KG8pLG89c2V0VGltZW91dChmdW5jdGlvbigpe2EuY3Vyckl0ZW0mJmEuY3Vyckl0ZW0ubG9hZGluZz8oIWEuYWxsb3dQcm9ncmVzc2l2ZUltZygpfHxhLmN1cnJJdGVtLmltZyYmIWEuY3Vyckl0ZW0uaW1nLm5hdHVyYWxXaWR0aCkmJk8oITEpOk8oITApfSxxLmxvYWRpbmdJbmRpY2F0b3JEZWxheSl9KSxsKFwiaW1hZ2VMb2FkQ29tcGxldGVcIixmdW5jdGlvbihiLGMpe2EuY3Vyckl0ZW09PT1jJiZPKCEwKX0pKX0sTz1mdW5jdGlvbihhKXtuIT09YSYmKEMobSxcInByZWxvYWRlci0tYWN0aXZlXCIsIWEpLG49YSl9LFA9ZnVuY3Rpb24oYSl7dmFyIGM9YS52R2FwO2lmKEIoKSl7dmFyIGc9cS5iYXJzU2l6ZTtpZihxLmNhcHRpb25FbCYmXCJhdXRvXCI9PT1nLmJvdHRvbSlpZihmfHwoZj1iLmNyZWF0ZUVsKFwicHN3cF9fY2FwdGlvbiBwc3dwX19jYXB0aW9uLS1mYWtlXCIpLGYuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbChcInBzd3BfX2NhcHRpb25fX2NlbnRlclwiKSksZC5pbnNlcnRCZWZvcmUoZixlKSxiLmFkZENsYXNzKGQsXCJwc3dwX191aS0tZml0XCIpKSxxLmFkZENhcHRpb25IVE1MRm4oYSxmLCEwKSl7dmFyIGg9Zi5jbGllbnRIZWlnaHQ7Yy5ib3R0b209cGFyc2VJbnQoaCwxMCl8fDQ0fWVsc2UgYy5ib3R0b209Zy50b3A7ZWxzZSBjLmJvdHRvbT1nLmJvdHRvbTtjLnRvcD1nLnRvcH1lbHNlIGMudG9wPWMuYm90dG9tPTB9LFE9ZnVuY3Rpb24oKXtxLnRpbWVUb0lkbGUmJmwoXCJtb3VzZVVzZWRcIixmdW5jdGlvbigpe2IuYmluZChkb2N1bWVudCxcIm1vdXNlbW92ZVwiLEspLGIuYmluZChkb2N1bWVudCxcIm1vdXNlb3V0XCIsTCksdD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe0orKywyPT09SiYmdi5zZXRJZGxlKCEwKX0scS50aW1lVG9JZGxlLzIpfSl9LFI9ZnVuY3Rpb24oKXtsKFwib25WZXJ0aWNhbERyYWdcIixmdW5jdGlvbihhKXt4JiYuOTU+YT92LmhpZGVDb250cm9scygpOiF4JiZhPj0uOTUmJnYuc2hvd0NvbnRyb2xzKCl9KTt2YXIgYTtsKFwib25QaW5jaENsb3NlXCIsZnVuY3Rpb24oYil7eCYmLjk+Yj8odi5oaWRlQ29udHJvbHMoKSxhPSEwKTphJiYheCYmYj4uOSYmdi5zaG93Q29udHJvbHMoKX0pLGwoXCJ6b29tR2VzdHVyZUVuZGVkXCIsZnVuY3Rpb24oKXthPSExLGEmJiF4JiZ2LnNob3dDb250cm9scygpfSl9LFM9W3tuYW1lOlwiY2FwdGlvblwiLG9wdGlvbjpcImNhcHRpb25FbFwiLG9uSW5pdDpmdW5jdGlvbihhKXtlPWF9fSx7bmFtZTpcInNoYXJlLW1vZGFsXCIsb3B0aW9uOlwic2hhcmVFbFwiLG9uSW5pdDpmdW5jdGlvbihhKXtpPWF9LG9uVGFwOmZ1bmN0aW9uKCl7RigpfX0se25hbWU6XCJidXR0b24tLXNoYXJlXCIsb3B0aW9uOlwic2hhcmVFbFwiLG9uSW5pdDpmdW5jdGlvbihhKXtoPWF9LG9uVGFwOmZ1bmN0aW9uKCl7RigpfX0se25hbWU6XCJidXR0b24tLXpvb21cIixvcHRpb246XCJ6b29tRWxcIixvblRhcDphLnRvZ2dsZURlc2t0b3Bab29tfSx7bmFtZTpcImNvdW50ZXJcIixvcHRpb246XCJjb3VudGVyRWxcIixvbkluaXQ6ZnVuY3Rpb24oYSl7Zz1hfX0se25hbWU6XCJidXR0b24tLWNsb3NlXCIsb3B0aW9uOlwiY2xvc2VFbFwiLG9uVGFwOmEuY2xvc2V9LHtuYW1lOlwiYnV0dG9uLS1hcnJvdy0tbGVmdFwiLG9wdGlvbjpcImFycm93RWxcIixvblRhcDphLnByZXZ9LHtuYW1lOlwiYnV0dG9uLS1hcnJvdy0tcmlnaHRcIixvcHRpb246XCJhcnJvd0VsXCIsb25UYXA6YS5uZXh0fSx7bmFtZTpcImJ1dHRvbi0tZnNcIixvcHRpb246XCJmdWxsc2NyZWVuRWxcIixvblRhcDpmdW5jdGlvbigpe2MuaXNGdWxsc2NyZWVuKCk/Yy5leGl0KCk6Yy5lbnRlcigpfX0se25hbWU6XCJwcmVsb2FkZXJcIixvcHRpb246XCJwcmVsb2FkZXJFbFwiLG9uSW5pdDpmdW5jdGlvbihhKXttPWF9fV0sVD1mdW5jdGlvbigpe3ZhciBhLGMsZSxmPWZ1bmN0aW9uKGQpe2lmKGQpZm9yKHZhciBmPWQubGVuZ3RoLGc9MDtmPmc7ZysrKXthPWRbZ10sYz1hLmNsYXNzTmFtZTtmb3IodmFyIGg9MDtoPFMubGVuZ3RoO2grKyllPVNbaF0sYy5pbmRleE9mKFwicHN3cF9fXCIrZS5uYW1lKT4tMSYmKHFbZS5vcHRpb25dPyhiLnJlbW92ZUNsYXNzKGEsXCJwc3dwX19lbGVtZW50LS1kaXNhYmxlZFwiKSxlLm9uSW5pdCYmZS5vbkluaXQoYSkpOmIuYWRkQ2xhc3MoYSxcInBzd3BfX2VsZW1lbnQtLWRpc2FibGVkXCIpKX19O2YoZC5jaGlsZHJlbik7dmFyIGc9Yi5nZXRDaGlsZEJ5Q2xhc3MoZCxcInBzd3BfX3RvcC1iYXJcIik7ZyYmZihnLmNoaWxkcmVuKX07di5pbml0PWZ1bmN0aW9uKCl7Yi5leHRlbmQoYS5vcHRpb25zLHosITApLHE9YS5vcHRpb25zLGQ9Yi5nZXRDaGlsZEJ5Q2xhc3MoYS5zY3JvbGxXcmFwLFwicHN3cF9fdWlcIiksbD1hLmxpc3RlbixSKCksbChcImJlZm9yZUNoYW5nZVwiLHYudXBkYXRlKSxsKFwiZG91YmxlVGFwXCIsZnVuY3Rpb24oYil7dmFyIGM9YS5jdXJySXRlbS5pbml0aWFsWm9vbUxldmVsO2EuZ2V0Wm9vbUxldmVsKCkhPT1jP2Euem9vbVRvKGMsYiwzMzMpOmEuem9vbVRvKHEuZ2V0RG91YmxlVGFwWm9vbSghMSxhLmN1cnJJdGVtKSxiLDMzMyl9KSxsKFwicHJldmVudERyYWdFdmVudFwiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O2QmJmQuY2xhc3NOYW1lJiZhLnR5cGUuaW5kZXhPZihcIm1vdXNlXCIpPi0xJiYoZC5jbGFzc05hbWUuaW5kZXhPZihcIl9fY2FwdGlvblwiKT4wfHwvKFNNQUxMfFNUUk9OR3xFTSkvaS50ZXN0KGQudGFnTmFtZSkpJiYoYy5wcmV2ZW50PSExKX0pLGwoXCJiaW5kRXZlbnRzXCIsZnVuY3Rpb24oKXtiLmJpbmQoZCxcInBzd3BUYXAgY2xpY2tcIixBKSxiLmJpbmQoYS5zY3JvbGxXcmFwLFwicHN3cFRhcFwiLHYub25HbG9iYWxUYXApLGEubGlrZWx5VG91Y2hEZXZpY2V8fGIuYmluZChhLnNjcm9sbFdyYXAsXCJtb3VzZW92ZXJcIix2Lm9uTW91c2VPdmVyKX0pLGwoXCJ1bmJpbmRFdmVudHNcIixmdW5jdGlvbigpe3l8fEYoKSx0JiZjbGVhckludGVydmFsKHQpLGIudW5iaW5kKGRvY3VtZW50LFwibW91c2VvdXRcIixMKSxiLnVuYmluZChkb2N1bWVudCxcIm1vdXNlbW92ZVwiLEspLGIudW5iaW5kKGQsXCJwc3dwVGFwIGNsaWNrXCIsQSksYi51bmJpbmQoYS5zY3JvbGxXcmFwLFwicHN3cFRhcFwiLHYub25HbG9iYWxUYXApLGIudW5iaW5kKGEuc2Nyb2xsV3JhcCxcIm1vdXNlb3ZlclwiLHYub25Nb3VzZU92ZXIpLGMmJihiLnVuYmluZChkb2N1bWVudCxjLmV2ZW50Syx2LnVwZGF0ZUZ1bGxzY3JlZW4pLGMuaXNGdWxsc2NyZWVuKCkmJihxLmhpZGVBbmltYXRpb25EdXJhdGlvbj0wLGMuZXhpdCgpKSxjPW51bGwpfSksbChcImRlc3Ryb3lcIixmdW5jdGlvbigpe3EuY2FwdGlvbkVsJiYoZiYmZC5yZW1vdmVDaGlsZChmKSxiLnJlbW92ZUNsYXNzKGUsXCJwc3dwX19jYXB0aW9uLS1lbXB0eVwiKSksaSYmKGkuY2hpbGRyZW5bMF0ub25jbGljaz1udWxsKSxiLnJlbW92ZUNsYXNzKGQsXCJwc3dwX191aS0tb3Zlci1jbG9zZVwiKSxiLmFkZENsYXNzKGQsXCJwc3dwX191aS0taGlkZGVuXCIpLHYuc2V0SWRsZSghMSl9KSxxLnNob3dBbmltYXRpb25EdXJhdGlvbnx8Yi5yZW1vdmVDbGFzcyhkLFwicHN3cF9fdWktLWhpZGRlblwiKSxsKFwiaW5pdGlhbFpvb21JblwiLGZ1bmN0aW9uKCl7cS5zaG93QW5pbWF0aW9uRHVyYXRpb24mJmIucmVtb3ZlQ2xhc3MoZCxcInBzd3BfX3VpLS1oaWRkZW5cIil9KSxsKFwiaW5pdGlhbFpvb21PdXRcIixmdW5jdGlvbigpe2IuYWRkQ2xhc3MoZCxcInBzd3BfX3VpLS1oaWRkZW5cIil9KSxsKFwicGFyc2VWZXJ0aWNhbE1hcmdpblwiLFApLFQoKSxxLnNoYXJlRWwmJmgmJmkmJih5PSEwKSxEKCksUSgpLE0oKSxOKCl9LHYuc2V0SWRsZT1mdW5jdGlvbihhKXtrPWEsQyhkLFwidWktLWlkbGVcIixhKX0sdi51cGRhdGU9ZnVuY3Rpb24oKXt4JiZhLmN1cnJJdGVtPyh2LnVwZGF0ZUluZGV4SW5kaWNhdG9yKCkscS5jYXB0aW9uRWwmJihxLmFkZENhcHRpb25IVE1MRm4oYS5jdXJySXRlbSxlKSxDKGUsXCJjYXB0aW9uLS1lbXB0eVwiLCFhLmN1cnJJdGVtLnRpdGxlKSksdz0hMCk6dz0hMSxEKCl9LHYudXBkYXRlRnVsbHNjcmVlbj1mdW5jdGlvbigpe0MoYS50ZW1wbGF0ZSxcImZzXCIsYy5pc0Z1bGxzY3JlZW4oKSl9LHYudXBkYXRlSW5kZXhJbmRpY2F0b3I9ZnVuY3Rpb24oKXtxLmNvdW50ZXJFbCYmKGcuaW5uZXJIVE1MPWEuZ2V0Q3VycmVudEluZGV4KCkrMStxLmluZGV4SW5kaWNhdG9yU2VwK3EuZ2V0TnVtSXRlbXNGbigpKX0sdi5vbkdsb2JhbFRhcD1mdW5jdGlvbihjKXtjPWN8fHdpbmRvdy5ldmVudDt2YXIgZD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50O2lmKCFyKWlmKGMuZGV0YWlsJiZcIm1vdXNlXCI9PT1jLmRldGFpbC5wb2ludGVyVHlwZSlJKGQpJiZhLmNsb3NlKCksYi5oYXNDbGFzcyhkLFwicHN3cF9faW1nXCIpJiYoMT09PWEuZ2V0Wm9vbUxldmVsKCkmJmEuZ2V0Wm9vbUxldmVsKCk8PWEuY3Vyckl0ZW0uZml0UmF0aW8/YS5jbG9zZSgpOmEudG9nZ2xlRGVza3RvcFpvb20oYy5kZXRhaWwucmVsZWFzZVBvaW50KSk7ZWxzZSBpZihxLnRhcFRvVG9nZ2xlQ29udHJvbHMmJih4P3YuaGlkZUNvbnRyb2xzKCk6di5zaG93Q29udHJvbHMoKSkscS50YXBUb0Nsb3NlJiYoYi5oYXNDbGFzcyhkLFwicHN3cF9faW1nXCIpfHxJKGQpKSlyZXR1cm4gdm9pZCBhLmNsb3NlKCl9LHYub25Nb3VzZU92ZXI9ZnVuY3Rpb24oYSl7YT1hfHx3aW5kb3cuZXZlbnQ7dmFyIGI9YS50YXJnZXR8fGEuc3JjRWxlbWVudDtDKGQsXCJ1aS0tb3Zlci1jbG9zZVwiLEkoYikpfSx2LmhpZGVDb250cm9scz1mdW5jdGlvbigpe2IuYWRkQ2xhc3MoZCxcInBzd3BfX3VpLS1oaWRkZW5cIikseD0hMX0sdi5zaG93Q29udHJvbHM9ZnVuY3Rpb24oKXt4PSEwLHd8fHYudXBkYXRlKCksYi5yZW1vdmVDbGFzcyhkLFwicHN3cF9fdWktLWhpZGRlblwiKX0sdi5zdXBwb3J0c0Z1bGxzY3JlZW49ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudDtyZXR1cm4hIShhLmV4aXRGdWxsc2NyZWVufHxhLm1vekNhbmNlbEZ1bGxTY3JlZW58fGEud2Via2l0RXhpdEZ1bGxzY3JlZW58fGEubXNFeGl0RnVsbHNjcmVlbil9LHYuZ2V0RnVsbHNjcmVlbkFQST1mdW5jdGlvbigpe3ZhciBiLGM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGQ9XCJmdWxsc2NyZWVuY2hhbmdlXCI7cmV0dXJuIGMucmVxdWVzdEZ1bGxzY3JlZW4/Yj17ZW50ZXJLOlwicmVxdWVzdEZ1bGxzY3JlZW5cIixleGl0SzpcImV4aXRGdWxsc2NyZWVuXCIsZWxlbWVudEs6XCJmdWxsc2NyZWVuRWxlbWVudFwiLGV2ZW50SzpkfTpjLm1velJlcXVlc3RGdWxsU2NyZWVuP2I9e2VudGVySzpcIm1velJlcXVlc3RGdWxsU2NyZWVuXCIsZXhpdEs6XCJtb3pDYW5jZWxGdWxsU2NyZWVuXCIsZWxlbWVudEs6XCJtb3pGdWxsU2NyZWVuRWxlbWVudFwiLGV2ZW50SzpcIm1velwiK2R9OmMud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4/Yj17ZW50ZXJLOlwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW5cIixleGl0SzpcIndlYmtpdEV4aXRGdWxsc2NyZWVuXCIsZWxlbWVudEs6XCJ3ZWJraXRGdWxsc2NyZWVuRWxlbWVudFwiLGV2ZW50SzpcIndlYmtpdFwiK2R9OmMubXNSZXF1ZXN0RnVsbHNjcmVlbiYmKGI9e2VudGVySzpcIm1zUmVxdWVzdEZ1bGxzY3JlZW5cIixleGl0SzpcIm1zRXhpdEZ1bGxzY3JlZW5cIixlbGVtZW50SzpcIm1zRnVsbHNjcmVlbkVsZW1lbnRcIixldmVudEs6XCJNU0Z1bGxzY3JlZW5DaGFuZ2VcIn0pLGImJihiLmVudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGo9cS5jbG9zZU9uU2Nyb2xsLHEuY2xvc2VPblNjcm9sbD0hMSxcIndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuXCIhPT10aGlzLmVudGVySz9hLnRlbXBsYXRlW3RoaXMuZW50ZXJLXSgpOnZvaWQgYS50ZW1wbGF0ZVt0aGlzLmVudGVyS10oRWxlbWVudC5BTExPV19LRVlCT0FSRF9JTlBVVCl9LGIuZXhpdD1mdW5jdGlvbigpe3JldHVybiBxLmNsb3NlT25TY3JvbGw9aixkb2N1bWVudFt0aGlzLmV4aXRLXSgpfSxiLmlzRnVsbHNjcmVlbj1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudFt0aGlzLmVsZW1lbnRLXX0pLGJ9fTtyZXR1cm4gYX0pOyIsIi8qISBQaG90b1N3aXBlIC0gdjQuMC4zIC0gMjAxNS0wMS0wNVxuKiBodHRwOi8vcGhvdG9zd2lwZS5jb21cbiogQ29weXJpZ2h0IChjKSAyMDE1IERtaXRyeSBTZW1lbm92OyAqL1xuIWZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShiKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKCk6YS5QaG90b1N3aXBlPWIoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXtmZWF0dXJlczpudWxsLGJpbmQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9KGQ/XCJyZW1vdmVcIjpcImFkZFwiKStcIkV2ZW50TGlzdGVuZXJcIjtiPWIuc3BsaXQoXCIgXCIpO2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWJbZl0mJmFbZV0oYltmXSxjLCExKX0saXNBcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fSxjcmVhdGVFbDpmdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYnx8XCJkaXZcIik7cmV0dXJuIGEmJihjLmNsYXNzTmFtZT1hKSxjfSxnZXRTY3JvbGxZOmZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LnBhZ2VZT2Zmc2V0O3JldHVybiB2b2lkIDAhPT1hP2E6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcH0sdW5iaW5kOmZ1bmN0aW9uKGEsYixjKXtlLmJpbmQoYSxiLGMsITApfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBSZWdFeHAoXCIoXFxcXHN8XilcIitiK1wiKFxcXFxzfCQpXCIpO2EuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoYyxcIiBcIikucmVwbGFjZSgvXlxcc1xccyovLFwiXCIpLnJlcGxhY2UoL1xcc1xccyokLyxcIlwiKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxiKXtlLmhhc0NsYXNzKGEsYil8fChhLmNsYXNzTmFtZSs9KGEuY2xhc3NOYW1lP1wiIFwiOlwiXCIpK2IpfSxoYXNDbGFzczpmdW5jdGlvbihhLGIpe3JldHVybiBhLmNsYXNzTmFtZSYmbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK2IrXCIoXFxcXHN8JClcIikudGVzdChhLmNsYXNzTmFtZSl9LGdldENoaWxkQnlDbGFzczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7Yzspe2lmKGUuaGFzQ2xhc3MoYyxiKSlyZXR1cm4gYztjPWMubmV4dFNpYmxpbmd9fSxhcnJheVNlYXJjaDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoO2QtLTspaWYoYVtkXVtjXT09PWIpcmV0dXJuIGQ7cmV0dXJuLTF9LGV4dGVuZDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkIGluIGIpaWYoYi5oYXNPd25Qcm9wZXJ0eShkKSl7aWYoYyYmYS5oYXNPd25Qcm9wZXJ0eShkKSljb250aW51ZTthW2RdPWJbZF19fSxlYXNpbmc6e3NpbmU6e291dDpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zaW4oYSooTWF0aC5QSS8yKSl9LGluT3V0OmZ1bmN0aW9uKGEpe3JldHVybi0oTWF0aC5jb3MoTWF0aC5QSSphKS0xKS8yfX0sY3ViaWM6e291dDpmdW5jdGlvbihhKXtyZXR1cm4tLWEqYSphKzF9fX0sZGV0ZWN0RmVhdHVyZXM6ZnVuY3Rpb24oKXtpZihlLmZlYXR1cmVzKXJldHVybiBlLmZlYXR1cmVzO3ZhciBhPWUuY3JlYXRlRWwoKSxiPWEuc3R5bGUsYz1cIlwiLGQ9e307aWYoZC5vbGRJRT1kb2N1bWVudC5hbGwmJiFkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyLGQudG91Y2g9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyx3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lJiYoZC5yYWY9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSxkLmNhZj13aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpLGQucG9pbnRlckV2ZW50PW5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8bmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQsIWQucG9pbnRlckV2ZW50KXt2YXIgZj1uYXZpZ2F0b3IudXNlckFnZW50O2lmKC9pUChob25lfG9kKS8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pKXt2YXIgZz1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvT1MgKFxcZCspXyhcXGQrKV8/KFxcZCspPy8pO2cmJmcubGVuZ3RoPjAmJihnPXBhcnNlSW50KGdbMV0sMTApLGc+PTEmJjg+ZyYmKGQuaXNPbGRJT1NQaG9uZT0hMCkpfXZhciBoPWYubWF0Y2goL0FuZHJvaWRcXHMoWzAtOVxcLl0qKS8pLGk9aD9oWzFdOjA7aT1wYXJzZUZsb2F0KGkpLGk+PTEmJig0LjQ+aSYmKGQuaXNPbGRBbmRyb2lkPSEwKSxkLmFuZHJvaWRWZXJzaW9uPWkpLGQuaXNNb2JpbGVPcGVyYT0vb3BlcmEgbWluaXxvcGVyYSBtb2JpL2kudGVzdChmKX1mb3IodmFyIGosayxsPVtcInRyYW5zZm9ybVwiLFwicGVyc3BlY3RpdmVcIixcImFuaW1hdGlvbk5hbWVcIl0sbT1bXCJcIixcIndlYmtpdFwiLFwiTW96XCIsXCJtc1wiLFwiT1wiXSxuPTA7ND5uO24rKyl7Yz1tW25dO2Zvcih2YXIgbz0wOzM+bztvKyspaj1sW29dLGs9YysoYz9qLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2ouc2xpY2UoMSk6aiksIWRbal0mJmsgaW4gYiYmKGRbal09ayk7YyYmIWQucmFmJiYoYz1jLnRvTG93ZXJDYXNlKCksZC5yYWY9d2luZG93W2MrXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sZC5yYWYmJihkLmNhZj13aW5kb3dbYytcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHx3aW5kb3dbYytcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSkpfWlmKCFkLnJhZil7dmFyIHA9MDtkLnJhZj1mdW5jdGlvbihhKXt2YXIgYj0obmV3IERhdGUpLmdldFRpbWUoKSxjPU1hdGgubWF4KDAsMTYtKGItcCkpLGQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKGIrYyl9LGMpO3JldHVybiBwPWIrYyxkfSxkLmNhZj1mdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fXJldHVybiBkLnN2Zz0hIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyYmISFkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwic3ZnXCIpLmNyZWF0ZVNWR1JlY3QsZS5mZWF0dXJlcz1kLGR9fTtlLmRldGVjdEZlYXR1cmVzKCksZS5mZWF0dXJlcy5vbGRJRSYmKGUuYmluZD1mdW5jdGlvbihhLGIsYyxkKXtiPWIuc3BsaXQoXCIgXCIpO2Zvcih2YXIgZSxmPShkP1wiZGV0YWNoXCI6XCJhdHRhY2hcIikrXCJFdmVudFwiLGc9ZnVuY3Rpb24oKXtjLmhhbmRsZUV2ZW50LmNhbGwoYyl9LGg9MDtoPGIubGVuZ3RoO2grKylpZihlPWJbaF0paWYoXCJvYmplY3RcIj09dHlwZW9mIGMmJmMuaGFuZGxlRXZlbnQpe2lmKGQpe2lmKCFjW1wib2xkSUVcIitlXSlyZXR1cm4hMX1lbHNlIGNbXCJvbGRJRVwiK2VdPWc7YVtmXShcIm9uXCIrZSxjW1wib2xkSUVcIitlXSl9ZWxzZSBhW2ZdKFwib25cIitlLGMpfSk7dmFyIGY9dGhpcyxnPTI1LGg9MyxpPXthbGxvd1BhblRvTmV4dDohMCxzcGFjaW5nOi4xMixiZ09wYWNpdHk6MSxtb3VzZVVzZWQ6ITEsbG9vcDohMCxwaW5jaFRvQ2xvc2U6ITAsY2xvc2VPblNjcm9sbDohMCxjbG9zZU9uVmVydGljYWxEcmFnOiEwLGhpZGVBbmltYXRpb25EdXJhdGlvbjozMzMsc2hvd0FuaW1hdGlvbkR1cmF0aW9uOjMzMyxzaG93SGlkZU9wYWNpdHk6ITEsZm9jdXM6ITAsZXNjS2V5OiEwLGFycm93S2V5czohMCxtYWluU2Nyb2xsRW5kRnJpY3Rpb246LjM1LHBhbkVuZEZyaWN0aW9uOi4zNSxpc0NsaWNrYWJsZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJBXCI9PT1hLnRhZ05hbWV9LGdldERvdWJsZVRhcFpvb206ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT8xOmIuaW5pdGlhbFpvb21MZXZlbDwuNz8xOjEuNX0sbWF4U3ByZWFkWm9vbToyLHNjYWxlTW9kZTpcImZpdFwiLG1vZGFsOiEwLGFsd2F5c0ZhZGVJbjohMX07ZS5leHRlbmQoaSxkKTt2YXIgaixrLGwsbSxuLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDLEQsRSxGLEcsSCxJLEosSyxMLE0sTixPLFAsUSxSLFMsVCxVLFYsVyxYLFksWiwkLF8sYWIsYmIsY2IsZGIsZWIsZmIsZ2IsaGIsaWIsamIsa2IsbGIsbWIsbmI9ZnVuY3Rpb24oKXtyZXR1cm57eDowLHk6MH19LG9iPW5iKCkscGI9bmIoKSxxYj1uYigpLHJiPXt9LHNiPTAsdGI9bmIoKSx1Yj0wLHZiPSEwLHdiPVtdLHhiPXt9LHliPWZ1bmN0aW9uKGEsYil7ZS5leHRlbmQoZixiLnB1YmxpY01ldGhvZHMpLHdiLnB1c2goYSl9LHpiPWZ1bmN0aW9uKGEpe3ZhciBiPV9jKCk7cmV0dXJuIGE+Yi0xP2EtYjowPmE/YithOmF9LEFiPXt9LEJiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEFiW2FdfHwoQWJbYV09W10pLEFiW2FdLnB1c2goYil9LENiPWZ1bmN0aW9uKGEpe3ZhciBiPUFiW2FdO2lmKGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7Yy5zaGlmdCgpO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKWJbZF0uYXBwbHkoZixjKX19LERiPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9LEViPWZ1bmN0aW9uKGEpe2tiPWEsZi5iZy5zdHlsZS5vcGFjaXR5PWEqaS5iZ09wYWNpdHl9LEZiPWZ1bmN0aW9uKGEsYixjLGQpe2FbR109dStiK1wicHgsIFwiK2MrXCJweFwiK3YrXCIgc2NhbGUoXCIrZCtcIilcIn0sR2I9ZnVuY3Rpb24oKXtmYiYmRmIoZmIscWIueCxxYi55LHMpfSxIYj1mdW5jdGlvbihhKXthLmNvbnRhaW5lciYmRmIoYS5jb250YWluZXIuc3R5bGUsYS5pbml0aWFsUG9zaXRpb24ueCxhLmluaXRpYWxQb3NpdGlvbi55LGEuaW5pdGlhbFpvb21MZXZlbCl9LEliPWZ1bmN0aW9uKGEsYil7YltHXT11K2ErXCJweCwgMHB4XCIrdn0sSmI9ZnVuY3Rpb24oYSxiKXtpZighaS5sb29wJiZiKXt2YXIgYz1tKyh0Yi54KnNiLWEpL3RiLngsZD1NYXRoLnJvdW5kKGEtc2MueCk7KDA+YyYmZD4wfHxjPj1fYygpLTEmJjA+ZCkmJihhPXNjLngrZCppLm1haW5TY3JvbGxFbmRGcmljdGlvbil9c2MueD1hLEliKGEsbil9LEtiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGNbYV0teVthXTtyZXR1cm4gcGJbYV0rb2JbYV0rYy1jKihiL3QpfSxMYj1mdW5jdGlvbihhLGIpe2EueD1iLngsYS55PWIueSxiLmlkJiYoYS5pZD1iLmlkKX0sTWI9ZnVuY3Rpb24oYSl7YS54PU1hdGgucm91bmQoYS54KSxhLnk9TWF0aC5yb3VuZChhLnkpfSxOYj1udWxsLE9iPWZ1bmN0aW9uKCl7TmImJihlLnVuYmluZChkb2N1bWVudCxcIm1vdXNlbW92ZVwiLE9iKSxlLmFkZENsYXNzKGEsXCJwc3dwLS1oYXNfbW91c2VcIiksaS5tb3VzZVVzZWQ9ITAsQ2IoXCJtb3VzZVVzZWRcIikpLE5iPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtOYj1udWxsfSwxMDApfSxQYj1mdW5jdGlvbigpe2UuYmluZChkb2N1bWVudCxcImtleWRvd25cIixmKSxQLnRyYW5zZm9ybSYmZS5iaW5kKGYuc2Nyb2xsV3JhcCxcImNsaWNrXCIsZiksaS5tb3VzZVVzZWR8fGUuYmluZChkb2N1bWVudCxcIm1vdXNlbW92ZVwiLE9iKSxlLmJpbmQod2luZG93LFwicmVzaXplIHNjcm9sbFwiLGYpLENiKFwiYmluZEV2ZW50c1wiKX0sUWI9ZnVuY3Rpb24oKXtlLnVuYmluZCh3aW5kb3csXCJyZXNpemVcIixmKSxlLnVuYmluZCh3aW5kb3csXCJzY3JvbGxcIixyLnNjcm9sbCksZS51bmJpbmQoZG9jdW1lbnQsXCJrZXlkb3duXCIsZiksZS51bmJpbmQoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixPYiksUC50cmFuc2Zvcm0mJmUudW5iaW5kKGYuc2Nyb2xsV3JhcCxcImNsaWNrXCIsZiksVyYmZS51bmJpbmQod2luZG93LHAsZiksQ2IoXCJ1bmJpbmRFdmVudHNcIil9LFJiPWZ1bmN0aW9uKGEsYil7dmFyIGM9aGQoZi5jdXJySXRlbSxyYixhKTtyZXR1cm4gYiYmKGViPWMpLGN9LFNiPWZ1bmN0aW9uKGEpe3JldHVybiBhfHwoYT1mLmN1cnJJdGVtKSxhLmluaXRpYWxab29tTGV2ZWx9LFRiPWZ1bmN0aW9uKGEpe3JldHVybiBhfHwoYT1mLmN1cnJJdGVtKSxhLnc+MD9pLm1heFNwcmVhZFpvb206MX0sVWI9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGQ9PT1mLmN1cnJJdGVtLmluaXRpYWxab29tTGV2ZWw/KGNbYV09Zi5jdXJySXRlbS5pbml0aWFsUG9zaXRpb25bYV0sITApOihjW2FdPUtiKGEsZCksY1thXT5iLm1pblthXT8oY1thXT1iLm1pblthXSwhMCk6Y1thXTxiLm1heFthXT8oY1thXT1iLm1heFthXSwhMCk6ITEpfSxWYj1mdW5jdGlvbigpe2lmKEcpe3ZhciBiPVAucGVyc3BlY3RpdmUmJiFJO3JldHVybiB1PVwidHJhbnNsYXRlXCIrKGI/XCIzZChcIjpcIihcIiksdm9pZCh2PVAucGVyc3BlY3RpdmU/XCIsIDBweClcIjpcIilcIil9Rz1cImxlZnRcIixlLmFkZENsYXNzKGEsXCJwc3dwLS1pZVwiKSxJYj1mdW5jdGlvbihhLGIpe2IubGVmdD1hK1wicHhcIn0sSGI9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jb250YWluZXIuc3R5bGUsYz1hLmZpdFJhdGlvKmEudyxkPWEuZml0UmF0aW8qYS5oO2Iud2lkdGg9YytcInB4XCIsYi5oZWlnaHQ9ZCtcInB4XCIsYi5sZWZ0PWEuaW5pdGlhbFBvc2l0aW9uLngrXCJweFwiLGIudG9wPWEuaW5pdGlhbFBvc2l0aW9uLnkrXCJweFwifSxHYj1mdW5jdGlvbigpe2lmKGZiKXt2YXIgYT1mYixiPWYuY3Vyckl0ZW0sYz1iLmZpdFJhdGlvKmIudyxkPWIuZml0UmF0aW8qYi5oO2Eud2lkdGg9YytcInB4XCIsYS5oZWlnaHQ9ZCtcInB4XCIsYS5sZWZ0PXFiLngrXCJweFwiLGEudG9wPXFiLnkrXCJweFwifX19LFdiPWZ1bmN0aW9uKGEpe3ZhciBiPVwiXCI7aS5lc2NLZXkmJjI3PT09YS5rZXlDb2RlP2I9XCJjbG9zZVwiOmkuYXJyb3dLZXlzJiYoMzc9PT1hLmtleUNvZGU/Yj1cInByZXZcIjozOT09PWEua2V5Q29kZSYmKGI9XCJuZXh0XCIpKSxiJiYoYS5jdHJsS2V5fHxhLmFsdEtleXx8YS5zaGlmdEtleXx8YS5tZXRhS2V5fHwoYS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMSxmW2JdKCkpKX0sWGI9ZnVuY3Rpb24oYSl7YSYmKFp8fFl8fGdifHxVKSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKX0sWWI9ZnVuY3Rpb24oKXt6PSEwLGkuY2xvc2VPblNjcm9sbCYmaiYmKCFmLmxpa2VseVRvdWNoRGV2aWNlfHxpLm1vdXNlVXNlZCkmJk1hdGguYWJzKGUuZ2V0U2Nyb2xsWSgpLU0pPjImJihsPSEwLGYuY2xvc2UoKSl9LFpiPXt9LCRiPTAsX2I9ZnVuY3Rpb24oYSl7WmJbYV0mJihaYlthXS5yYWYmJksoWmJbYV0ucmFmKSwkYi0tLGRlbGV0ZSBaYlthXSl9LGFjPWZ1bmN0aW9uKGEpe1piW2FdJiZfYihhKSxaYlthXXx8KCRiKyssWmJbYV09e30pfSxiYz1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBaYilaYi5oYXNPd25Qcm9wZXJ0eShhKSYmX2IoYSl9LGNjPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoLGk9RGIoKTthYyhhKTt2YXIgaj1mdW5jdGlvbigpe2lmKFpiW2FdKXtpZihoPURiKCktaSxoPj1kKXJldHVybiBfYihhKSxmKGMpLHZvaWQoZyYmZygpKTtmKChjLWIpKmUoaC9kKStiKSxaYlthXS5yYWY9SihqKX19O2ooKX0sZGM9e3Nob3V0OkNiLGxpc3RlbjpCYix2aWV3cG9ydFNpemU6cmIsb3B0aW9uczppLGlzTWFpblNjcm9sbEFuaW1hdGluZzpmdW5jdGlvbigpe3JldHVybiBnYn0sZ2V0Wm9vbUxldmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHN9LGdldEN1cnJlbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiBtfSxpc0RyYWdnaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFd9LGlzWm9vbWluZzpmdW5jdGlvbigpe3JldHVybiBiYn0sYXBwbHlab29tUGFuOmZ1bmN0aW9uKGEsYixjKXtxYi54PWIscWIueT1jLHM9YSxHYigpfSxpbml0OmZ1bmN0aW9uKCl7aWYoIWomJiFrKXt2YXIgYztmLmZyYW1ld29yaz1lLGYudGVtcGxhdGU9YSxmLmJnPWUuZ2V0Q2hpbGRCeUNsYXNzKGEsXCJwc3dwX19iZ1wiKSxMPWEuY2xhc3NOYW1lLGo9ITAsUD1lLmRldGVjdEZlYXR1cmVzKCksSj1QLnJhZixLPVAuY2FmLEc9UC50cmFuc2Zvcm0sTj1QLm9sZElFLGYuc2Nyb2xsV3JhcD1lLmdldENoaWxkQnlDbGFzcyhhLFwicHN3cF9fc2Nyb2xsLXdyYXBcIiksZi5jb250YWluZXI9ZS5nZXRDaGlsZEJ5Q2xhc3MoZi5zY3JvbGxXcmFwLFwicHN3cF9fY29udGFpbmVyXCIpLG49Zi5jb250YWluZXIuc3R5bGUsZi5pdGVtSG9sZGVycz1BPVt7ZWw6Zi5jb250YWluZXIuY2hpbGRyZW5bMF0sd3JhcDowLGluZGV4Oi0xfSx7ZWw6Zi5jb250YWluZXIuY2hpbGRyZW5bMV0sd3JhcDowLGluZGV4Oi0xfSx7ZWw6Zi5jb250YWluZXIuY2hpbGRyZW5bMl0sd3JhcDowLGluZGV4Oi0xfV0sQVswXS5lbC5zdHlsZS5kaXNwbGF5PUFbMl0uZWwuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixWYigpLHI9e3Jlc2l6ZTpmLnVwZGF0ZVNpemUsc2Nyb2xsOlliLGtleWRvd246V2IsY2xpY2s6WGJ9O3ZhciBkPVAuaXNPbGRJT1NQaG9uZXx8UC5pc09sZEFuZHJvaWR8fFAuaXNNb2JpbGVPcGVyYTtmb3IoUC5hbmltYXRpb25OYW1lJiZQLnRyYW5zZm9ybSYmIWR8fChpLnNob3dBbmltYXRpb25EdXJhdGlvbj1pLmhpZGVBbmltYXRpb25EdXJhdGlvbj0wKSxjPTA7Yzx3Yi5sZW5ndGg7YysrKWZbXCJpbml0XCIrd2JbY11dKCk7aWYoYil7dmFyIGc9Zi51aT1uZXcgYihmLGUpO2cuaW5pdCgpfUNiKFwiZmlyc3RVcGRhdGVcIiksbT1tfHxpLmluZGV4fHwwLChpc05hTihtKXx8MD5tfHxtPj1fYygpKSYmKG09MCksZi5jdXJySXRlbT0kYyhtKSwoUC5pc09sZElPU1Bob25lfHxQLmlzT2xkQW5kcm9pZCkmJih2Yj0hMSksaS5tb2RhbCYmKGEuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixcImZhbHNlXCIpLHZiP2Euc3R5bGUucG9zaXRpb249XCJmaXhlZFwiOihhLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixhLnN0eWxlLnRvcD1lLmdldFNjcm9sbFkoKStcInB4XCIpKSx2b2lkIDA9PT1PJiYoQ2IoXCJpbml0aWFsTGF5b3V0XCIpLE89TT1lLmdldFNjcm9sbFkoKSk7dmFyIGw9XCJwc3dwLS1vcGVuIFwiO2ZvcihpLm1haW5DbGFzcyYmKGwrPWkubWFpbkNsYXNzK1wiIFwiKSxpLnNob3dIaWRlT3BhY2l0eSYmKGwrPVwicHN3cC0tYW5pbWF0ZV9vcGFjaXR5IFwiKSxsKz1JP1wicHN3cC0tdG91Y2hcIjpcInBzd3AtLW5vdG91Y2hcIixsKz1QLmFuaW1hdGlvbk5hbWU/XCIgcHN3cC0tY3NzX2FuaW1hdGlvblwiOlwiXCIsbCs9UC5zdmc/XCIgcHN3cC0tc3ZnXCI6XCJcIixlLmFkZENsYXNzKGEsbCksZi51cGRhdGVTaXplKCksbz0tMSx1Yj1udWxsLGM9MDtoPmM7YysrKUliKChjK28pKnRiLngsQVtjXS5lbC5zdHlsZSk7Tnx8ZS5iaW5kKGYuc2Nyb2xsV3JhcCxxLGYpLEJiKFwiaW5pdGlhbFpvb21JbkVuZFwiLGZ1bmN0aW9uKCl7Zi5zZXRDb250ZW50KEFbMF0sbS0xKSxmLnNldENvbnRlbnQoQVsyXSxtKzEpLEFbMF0uZWwuc3R5bGUuZGlzcGxheT1BWzJdLmVsLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLGkuZm9jdXMmJmEuZm9jdXMoKSxQYigpfSksZi5zZXRDb250ZW50KEFbMV0sbSksZi51cGRhdGVDdXJySXRlbSgpLENiKFwiYWZ0ZXJJbml0XCIpLHZifHwodz1zZXRJbnRlcnZhbChmdW5jdGlvbigpeyRifHxXfHxiYnx8cyE9PWYuY3Vyckl0ZW0uaW5pdGlhbFpvb21MZXZlbHx8Zi51cGRhdGVTaXplKCl9LDFlMykpLGUuYWRkQ2xhc3MoYSxcInBzd3AtLXZpc2libGVcIil9fSxjbG9zZTpmdW5jdGlvbigpe2omJihqPSExLGs9ITAsQ2IoXCJjbG9zZVwiKSxRYigpLGJkKGYuY3Vyckl0ZW0sbnVsbCwhMCxmLmRlc3Ryb3kpKX0sZGVzdHJveTpmdW5jdGlvbigpe0NiKFwiZGVzdHJveVwiKSxXYyYmY2xlYXJUaW1lb3V0KFdjKSxpLm1vZGFsJiYoYS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSxhLmNsYXNzTmFtZT1MKSx3JiZjbGVhckludGVydmFsKHcpLGUudW5iaW5kKGYuc2Nyb2xsV3JhcCxxLGYpLGUudW5iaW5kKHdpbmRvdyxcInNjcm9sbFwiLGYpLHljKCksYmMoKSxBYj1udWxsfSxwYW5UbzpmdW5jdGlvbihhLGIsYyl7Y3x8KGE+ZWIubWluLng/YT1lYi5taW4ueDphPGViLm1heC54JiYoYT1lYi5tYXgueCksYj5lYi5taW4ueT9iPWViLm1pbi55OmI8ZWIubWF4LnkmJihiPWViLm1heC55KSkscWIueD1hLHFiLnk9YixHYigpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXthPWF8fHdpbmRvdy5ldmVudCxyW2EudHlwZV0mJnJbYS50eXBlXShhKX0sZ29UbzpmdW5jdGlvbihhKXthPXpiKGEpO3ZhciBiPWEtbTt1Yj1iLG09YSxmLmN1cnJJdGVtPSRjKG0pLHNiLT1iLEpiKHRiLngqc2IpLGJjKCksZ2I9ITEsZi51cGRhdGVDdXJySXRlbSgpfSxuZXh0OmZ1bmN0aW9uKCl7Zi5nb1RvKG0rMSl9LHByZXY6ZnVuY3Rpb24oKXtmLmdvVG8obS0xKX0sdXBkYXRlQ3Vyclpvb21JdGVtOmZ1bmN0aW9uKGEpe2lmKGEmJkNiKFwiYmVmb3JlQ2hhbmdlXCIsMCksQVsxXS5lbC5jaGlsZHJlbi5sZW5ndGgpe3ZhciBiPUFbMV0uZWwuY2hpbGRyZW5bMF07ZmI9ZS5oYXNDbGFzcyhiLFwicHN3cF9fem9vbS13cmFwXCIpP2Iuc3R5bGU6bnVsbH1lbHNlIGZiPW51bGw7ZWI9Zi5jdXJySXRlbS5ib3VuZHMsdD1zPWYuY3Vyckl0ZW0uaW5pdGlhbFpvb21MZXZlbCxxYi54PWViLmNlbnRlci54LHFiLnk9ZWIuY2VudGVyLnksYSYmQ2IoXCJhZnRlckNoYW5nZVwiKX0saW52YWxpZGF0ZUN1cnJJdGVtczpmdW5jdGlvbigpe3g9ITA7Zm9yKHZhciBhPTA7aD5hO2ErKylBW2FdLml0ZW0mJihBW2FdLml0ZW0ubmVlZHNVcGRhdGU9ITApfSx1cGRhdGVDdXJySXRlbTpmdW5jdGlvbihhKXtpZigwIT09dWIpe3ZhciBiLGM9TWF0aC5hYnModWIpO2lmKCEoYSYmMj5jKSl7Zi5jdXJySXRlbT0kYyhtKSxDYihcImJlZm9yZUNoYW5nZVwiLHViKSxjPj1oJiYobys9dWIrKHViPjA/LWg6aCksYz1oKTtmb3IodmFyIGQ9MDtjPmQ7ZCsrKXViPjA/KGI9QS5zaGlmdCgpLEFbaC0xXT1iLG8rKyxJYigobysyKSp0Yi54LGIuZWwuc3R5bGUpLGYuc2V0Q29udGVudChiLG0tYytkKzErMSkpOihiPUEucG9wKCksQS51bnNoaWZ0KGIpLG8tLSxJYihvKnRiLngsYi5lbC5zdHlsZSksZi5zZXRDb250ZW50KGIsbStjLWQtMS0xKSk7aWYoZmImJjE9PT1NYXRoLmFicyh1Yikpe3ZhciBlPSRjKEIpO2UuaW5pdGlhbFpvb21MZXZlbCE9PXMmJihoZChlLHJiKSxIYihlKSl9dWI9MCxmLnVwZGF0ZUN1cnJab29tSXRlbSgpLEI9bSxDYihcImFmdGVyQ2hhbmdlXCIpfX19LHVwZGF0ZVNpemU6ZnVuY3Rpb24oYil7aWYoIXZiKXt2YXIgYz1lLmdldFNjcm9sbFkoKTtpZihPIT09YyYmKGEuc3R5bGUudG9wPWMrXCJweFwiLE89YyksIWImJnhiLng9PT13aW5kb3cuaW5uZXJXaWR0aCYmeGIueT09PXdpbmRvdy5pbm5lckhlaWdodClyZXR1cm47eGIueD13aW5kb3cuaW5uZXJXaWR0aCx4Yi55PXdpbmRvdy5pbm5lckhlaWdodCxhLnN0eWxlLmhlaWdodD14Yi55K1wicHhcIn1pZihyYi54PWYuc2Nyb2xsV3JhcC5jbGllbnRXaWR0aCxyYi55PWYuc2Nyb2xsV3JhcC5jbGllbnRIZWlnaHQseT17eDowLHk6T30sdGIueD1yYi54K01hdGgucm91bmQocmIueCppLnNwYWNpbmcpLHRiLnk9cmIueSxKYih0Yi54KnNiKSxDYihcImJlZm9yZVJlc2l6ZVwiKSx2b2lkIDAhPT1vKXtmb3IodmFyIGQsZyxqLGs9MDtoPms7aysrKWQ9QVtrXSxJYigoaytvKSp0Yi54LGQuZWwuc3R5bGUpLGo9emIobStrLTEpLGc9JGMoaikseHx8Zy5uZWVkc1VwZGF0ZXx8IWcuYm91bmRzPyhnJiZmLmNsZWFuU2xpZGUoZyksZi5zZXRDb250ZW50KGQsaiksMT09PWsmJihmLmN1cnJJdGVtPWcsZi51cGRhdGVDdXJyWm9vbUl0ZW0oITApKSxnLm5lZWRzVXBkYXRlPSExKTotMT09PWQuaW5kZXgmJmo+PTAmJmYuc2V0Q29udGVudChkLGopLGcmJmcuY29udGFpbmVyJiYoaGQoZyxyYiksSGIoZykpO3g9ITF9dD1zPWYuY3Vyckl0ZW0uaW5pdGlhbFpvb21MZXZlbCxlYj1mLmN1cnJJdGVtLmJvdW5kcyxlYiYmKHFiLng9ZWIuY2VudGVyLngscWIueT1lYi5jZW50ZXIueSxHYigpKSxDYihcInJlc2l6ZVwiKX0sem9vbVRvOmZ1bmN0aW9uKGEsYixjLGQsZil7YiYmKHQ9cyx0Yy54PU1hdGguYWJzKGIueCktcWIueCx0Yy55PU1hdGguYWJzKGIueSktcWIueSxMYihwYixxYikpO3ZhciBnPVJiKGEsITEpLGg9e307VWIoXCJ4XCIsZyxoLGEpLFViKFwieVwiLGcsaCxhKTt2YXIgaT1zLGo9e3g6cWIueCx5OnFiLnl9O01iKGgpO3ZhciBrPWZ1bmN0aW9uKGIpezE9PT1iPyhzPWEscWIueD1oLngscWIueT1oLnkpOihzPShhLWkpKmIraSxxYi54PShoLngtai54KSpiK2oueCxxYi55PShoLnktai55KSpiK2oueSksZiYmZihiKSxHYigpfTtjP2NjKFwiY3VzdG9tWm9vbVRvXCIsMCwxLGMsZHx8ZS5lYXNpbmcuc2luZS5pbk91dCxrKTprKDEpfX0sZWM9MzAsZmM9MTAsZ2M9e30saGM9e30saWM9e30samM9e30sa2M9e30sbGM9W10sbWM9e30sbmM9W10sb2M9e30scGM9MCxxYz1uYigpLHJjPTAsc2M9bmIoKSx0Yz1uYigpLHVjPW5iKCksdmM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS54PT09Yi54JiZhLnk9PT1iLnl9LHdjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hdGguYWJzKGEueC1iLngpPGcmJk1hdGguYWJzKGEueS1iLnkpPGd9LHhjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG9jLng9TWF0aC5hYnMoYS54LWIueCksb2MueT1NYXRoLmFicyhhLnktYi55KSxNYXRoLnNxcnQob2MueCpvYy54K29jLnkqb2MueSl9LHljPWZ1bmN0aW9uKCl7JCYmKEsoJCksJD1udWxsKX0semM9ZnVuY3Rpb24oKXtXJiYoJD1KKHpjKSxQYygpKX0sQWM9ZnVuY3Rpb24oKXtyZXR1cm4hKFwiZml0XCI9PT1pLnNjYWxlTW9kZSYmcz09PWYuY3Vyckl0ZW0uaW5pdGlhbFpvb21MZXZlbCl9LEJjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/YS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lLmluZGV4T2YoXCJwc3dwX19zY3JvbGwtd3JhcFwiKT4tMT8hMTpiKGEpP2E6QmMoYS5wYXJlbnROb2RlLGIpOiExfSxDYz17fSxEYz1mdW5jdGlvbihhLGIpe3JldHVybiBDYy5wcmV2ZW50PSFCYyhhLnRhcmdldCxpLmlzQ2xpY2thYmxlRWxlbWVudCksQ2IoXCJwcmV2ZW50RHJhZ0V2ZW50XCIsYSxiLENjKSxDYy5wcmV2ZW50fSxFYz1mdW5jdGlvbihhLGIpe3JldHVybiBiLng9YS5wYWdlWCxiLnk9YS5wYWdlWSxiLmlkPWEuaWRlbnRpZmllcixifSxGYz1mdW5jdGlvbihhLGIsYyl7Yy54PS41KihhLngrYi54KSxjLnk9LjUqKGEueStiLnkpfSxHYz1mdW5jdGlvbihhLGIsYyl7aWYoYS1SPjUwKXt2YXIgZD1uYy5sZW5ndGg+Mj9uYy5zaGlmdCgpOnt9O2QueD1iLGQueT1jLG5jLnB1c2goZCksUj1hfX0sSGM9ZnVuY3Rpb24oKXt2YXIgYT1xYi55LWYuY3Vyckl0ZW0uaW5pdGlhbFBvc2l0aW9uLnk7cmV0dXJuIDEtTWF0aC5hYnMoYS8ocmIueS8yKSl9LEljPXt9LEpjPXt9LEtjPVtdLExjPWZ1bmN0aW9uKGEpe2Zvcig7S2MubGVuZ3RoPjA7KUtjLnBvcCgpO3JldHVybiBIPyhtYj0wLGxjLmZvckVhY2goZnVuY3Rpb24oYSl7MD09PW1iP0tjWzBdPWE6MT09PW1iJiYoS2NbMV09YSksbWIrK30pKTphLnR5cGUuaW5kZXhPZihcInRvdWNoXCIpPi0xP2EudG91Y2hlcyYmYS50b3VjaGVzLmxlbmd0aD4wJiYoS2NbMF09RWMoYS50b3VjaGVzWzBdLEljKSxhLnRvdWNoZXMubGVuZ3RoPjEmJihLY1sxXT1FYyhhLnRvdWNoZXNbMV0sSmMpKSk6KEljLng9YS5wYWdlWCxJYy55PWEucGFnZVksSWMuaWQ9XCJcIixLY1swXT1JYyksS2N9LE1jPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGcsaD0wLGo9cWJbYV0rYlthXSxrPWJbYV0+MCxsPXNjLngrYi54LG09c2MueC1tYy54O3JldHVybiBjPWo+ZWIubWluW2FdfHxqPGViLm1heFthXT9pLnBhbkVuZEZyaWN0aW9uOjEsaj1xYlthXStiW2FdKmMsIWkuYWxsb3dQYW5Ub05leHQmJnMhPT1mLmN1cnJJdGVtLmluaXRpYWxab29tTGV2ZWx8fChmYj9cImhcIiE9PWhifHxcInhcIiE9PWF8fFl8fChrPyhqPmViLm1pblthXSYmKGM9aS5wYW5FbmRGcmljdGlvbixoPWViLm1pblthXS1qLGQ9ZWIubWluW2FdLXBiW2FdKSwoMD49ZHx8MD5tKSYmX2MoKT4xPyhnPWwsMD5tJiZsPm1jLngmJihnPW1jLngpKTplYi5taW4ueCE9PWViLm1heC54JiYoZT1qKSk6KGo8ZWIubWF4W2FdJiYoYz1pLnBhbkVuZEZyaWN0aW9uLGg9ai1lYi5tYXhbYV0sZD1wYlthXS1lYi5tYXhbYV0pLCgwPj1kfHxtPjApJiZfYygpPjE/KGc9bCxtPjAmJmw8bWMueCYmKGc9bWMueCkpOmViLm1pbi54IT09ZWIubWF4LngmJihlPWopKSk6Zz1sLFwieFwiIT09YSk/dm9pZChnYnx8X3x8cz5mLmN1cnJJdGVtLmZpdFJhdGlvJiYocWJbYV0rPWJbYV0qYykpOih2b2lkIDAhPT1nJiYoSmIoZywhMCksXz1nPT09bWMueD8hMTohMCksZWIubWluLnghPT1lYi5tYXgueCYmKHZvaWQgMCE9PWU/cWIueD1lOl98fChxYi54Kz1iLngqYykpLHZvaWQgMCE9PWcpfSxOYz1mdW5jdGlvbihhKXtpZighKFwibW91c2Vkb3duXCI9PT1hLnR5cGUmJmEuYnV0dG9uPjApKXtpZihaYylyZXR1cm4gdm9pZCBhLnByZXZlbnREZWZhdWx0KCk7aWYoIVZ8fFwibW91c2Vkb3duXCIhPT1hLnR5cGUpe2lmKERjKGEsITApJiZhLnByZXZlbnREZWZhdWx0KCksQ2IoXCJwb2ludGVyRG93blwiKSxIKXt2YXIgYj1lLmFycmF5U2VhcmNoKGxjLGEucG9pbnRlcklkLFwiaWRcIik7MD5iJiYoYj1sYy5sZW5ndGgpLGxjW2JdPXt4OmEucGFnZVgseTphLnBhZ2VZLGlkOmEucG9pbnRlcklkfX12YXIgYz1MYyhhKSxkPWMubGVuZ3RoO2FiPW51bGwsYmMoKSxXJiYxIT09ZHx8KFc9aWI9ITAsZS5iaW5kKHdpbmRvdyxwLGYpLFQ9bGI9amI9VT1fPVo9WD1ZPSExLGhiPW51bGwsQ2IoXCJmaXJzdFRvdWNoU3RhcnRcIixjKSxMYihwYixxYiksb2IueD1vYi55PTAsTGIoamMsY1swXSksTGIoa2MsamMpLG1jLng9dGIueCpzYixuYz1be3g6amMueCx5OmpjLnl9XSxSPVE9RGIoKSxSYihzLCEwKSx5YygpLHpjKCkpLCFiYiYmZD4xJiYhZ2ImJiFfJiYodD1zLFk9ITEsYmI9WD0hMCxvYi55PW9iLng9MCxMYihwYixxYiksTGIoZ2MsY1swXSksTGIoaGMsY1sxXSksRmMoZ2MsaGMsdWMpLHRjLng9TWF0aC5hYnModWMueCktcWIueCx0Yy55PU1hdGguYWJzKHVjLnkpLXFiLnksY2I9ZGI9eGMoZ2MsaGMpKX19fSxPYz1mdW5jdGlvbihhKXtpZihhLnByZXZlbnREZWZhdWx0KCksSCl7dmFyIGI9ZS5hcnJheVNlYXJjaChsYyxhLnBvaW50ZXJJZCxcImlkXCIpO2lmKGI+LTEpe3ZhciBjPWxjW2JdO2MueD1hLnBhZ2VYLGMueT1hLnBhZ2VZfX1pZihXKXt2YXIgZD1MYyhhKTtpZihoYnx8Wnx8YmIpYWI9ZDtlbHNle3ZhciBmPU1hdGguYWJzKGRbMF0ueC1qYy54KS1NYXRoLmFicyhkWzBdLnktamMueSk7TWF0aC5hYnMoZik+PWZjJiYoaGI9Zj4wP1wiaFwiOlwidlwiLGFiPWQpfX19LFBjPWZ1bmN0aW9uKCl7aWYoYWIpe3ZhciBhPWFiLmxlbmd0aDtpZigwIT09YSlpZihMYihnYyxhYlswXSksaWMueD1nYy54LWpjLngsaWMueT1nYy55LWpjLnksYmImJmE+MSl7aWYoamMueD1nYy54LGpjLnk9Z2MueSwhaWMueCYmIWljLnkmJnZjKGFiWzFdLGhjKSlyZXR1cm47TGIoaGMsYWJbMV0pLFl8fChZPSEwLENiKFwiem9vbUdlc3R1cmVTdGFydGVkXCIpKTt2YXIgYj14YyhnYyxoYyksYz1VYyhiKTtjPmYuY3Vyckl0ZW0uaW5pdGlhbFpvb21MZXZlbCtmLmN1cnJJdGVtLmluaXRpYWxab29tTGV2ZWwvMTUmJihsYj0hMCk7dmFyIGQ9MSxlPVNiKCksZz1UYigpO2lmKGU+YylpZihpLnBpbmNoVG9DbG9zZSYmIWxiJiZ0PD1mLmN1cnJJdGVtLmluaXRpYWxab29tTGV2ZWwpe3ZhciBoPWUtYyxqPTEtaC8oZS8xLjIpO0ViKGopLENiKFwib25QaW5jaENsb3NlXCIsaiksamI9ITB9ZWxzZSBkPShlLWMpL2UsZD4xJiYoZD0xKSxjPWUtZCooZS8zKTtlbHNlIGM+ZyYmKGQ9KGMtZykvKDYqZSksZD4xJiYoZD0xKSxjPWcrZCplKTswPmQmJihkPTApLGNiPWIsRmMoZ2MsaGMscWMpLG9iLngrPXFjLngtdWMueCxvYi55Kz1xYy55LXVjLnksTGIodWMscWMpLHFiLng9S2IoXCJ4XCIsYykscWIueT1LYihcInlcIixjKSxUPWM+cyxzPWMsR2IoKX1lbHNle2lmKCFoYilyZXR1cm47aWYoaWImJihpYj0hMSxNYXRoLmFicyhpYy54KT49ZmMmJihpYy54LT1hYlswXS54LWtjLngpLE1hdGguYWJzKGljLnkpPj1mYyYmKGljLnktPWFiWzBdLnkta2MueSkpLGpjLng9Z2MueCxqYy55PWdjLnksMD09PWljLngmJjA9PT1pYy55KXJldHVybjtpZihcInZcIj09PWhiJiZpLmNsb3NlT25WZXJ0aWNhbERyYWcmJiFBYygpKXtvYi55Kz1pYy55LHFiLnkrPWljLnk7dmFyIGs9SGMoKTtyZXR1cm4gVT0hMCxDYihcIm9uVmVydGljYWxEcmFnXCIsayksRWIoayksdm9pZCBHYigpfUdjKERiKCksZ2MueCxnYy55KSxaPSEwLGViPWYuY3Vyckl0ZW0uYm91bmRzO3ZhciBsPU1jKFwieFwiLGljKTtsfHwoTWMoXCJ5XCIsaWMpLE1iKHFiKSxHYigpKX19fSxRYz1mdW5jdGlvbihhKXtpZihQLmlzT2xkQW5kcm9pZCl7aWYoViYmXCJtb3VzZXVwXCI9PT1hLnR5cGUpcmV0dXJuO2EudHlwZS5pbmRleE9mKFwidG91Y2hcIik+LTEmJihjbGVhclRpbWVvdXQoViksVj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Vj0wfSw2MDApKX1DYihcInBvaW50ZXJVcFwiKSxEYyhhLCExKSYmYS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBiO2lmKEgpe3ZhciBjPWUuYXJyYXlTZWFyY2gobGMsYS5wb2ludGVySWQsXCJpZFwiKTtpZihjPi0xKWlmKGI9bGMuc3BsaWNlKGMsMSlbMF0sbmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKWIudHlwZT1hLnBvaW50ZXJUeXBlfHxcIm1vdXNlXCI7ZWxzZXt2YXIgZD17NDpcIm1vdXNlXCIsMjpcInRvdWNoXCIsMzpcInBlblwifTtiLnR5cGU9ZFthLnBvaW50ZXJUeXBlXSxiLnR5cGV8fChiLnR5cGU9YS5wb2ludGVyVHlwZXx8XCJtb3VzZVwiKX19dmFyIGcsaD1MYyhhKSxpPWgubGVuZ3RoO2lmKFwibW91c2V1cFwiPT09YS50eXBlJiYoaT0wKSwyPT09aSlyZXR1cm4gYWI9bnVsbCwhMDsxPT09aSYmTGIoa2MsaFswXSksMCE9PWl8fGhifHxnYnx8KGJ8fChcIm1vdXNldXBcIj09PWEudHlwZT9iPXt4OmEucGFnZVgseTphLnBhZ2VZLHR5cGU6XCJtb3VzZVwifTphLmNoYW5nZWRUb3VjaGVzJiZhLmNoYW5nZWRUb3VjaGVzWzBdJiYoYj17eDphLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLHk6YS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSx0eXBlOlwidG91Y2hcIn0pKSxDYihcInRvdWNoUmVsZWFzZVwiLGEsYikpO3ZhciBqPS0xO2lmKDA9PT1pJiYoVz0hMSxlLnVuYmluZCh3aW5kb3cscCxmKSx5YygpLGJiP2o9MDotMSE9PXJjJiYoaj1EYigpLXJjKSkscmM9MT09PWk/RGIoKTotMSxnPS0xIT09aiYmMTUwPmo/XCJ6b29tXCI6XCJzd2lwZVwiLGJiJiYyPmkmJihiYj0hMSwxPT09aSYmKGc9XCJ6b29tUG9pbnRlclVwXCIpLENiKFwiem9vbUdlc3R1cmVFbmRlZFwiKSksYWI9bnVsbCxafHxZfHxnYnx8VSlpZihiYygpLFN8fChTPVJjKCkpLFMuY2FsY3VsYXRlU3dpcGVTcGVlZChcInhcIiksVSl7dmFyIGs9SGMoKTtpZiguNj5rKWYuY2xvc2UoKTtlbHNle3ZhciBsPXFiLnksbT1rYjtjYyhcInZlcnRpY2FsRHJhZ1wiLDAsMSwzMDAsZS5lYXNpbmcuY3ViaWMub3V0LGZ1bmN0aW9uKGEpe3FiLnk9KGYuY3Vyckl0ZW0uaW5pdGlhbFBvc2l0aW9uLnktbCkqYStsLEViKCgxLW0pKmErbSksR2IoKX0pLENiKFwib25WZXJ0aWNhbERyYWdcIiwxKX19ZWxzZXtpZigoX3x8Z2IpJiYwPT09aSl7dmFyIG49VGMoZyxTKTtpZihuKXJldHVybjtnPVwiem9vbVBvaW50ZXJVcFwifWlmKCFnYilyZXR1cm5cInN3aXBlXCIhPT1nP3ZvaWQgVmMoKTp2b2lkKCFfJiZzPmYuY3Vyckl0ZW0uZml0UmF0aW8mJlNjKFMpKX19LFJjPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXtsYXN0RmxpY2tPZmZzZXQ6e30sbGFzdEZsaWNrRGlzdDp7fSxsYXN0RmxpY2tTcGVlZDp7fSxzbG93RG93blJhdGlvOnt9LHNsb3dEb3duUmF0aW9SZXZlcnNlOnt9LHNwZWVkRGVjZWxlcmF0aW9uUmF0aW86e30sc3BlZWREZWNlbGVyYXRpb25SYXRpb0Ficzp7fSxkaXN0YW5jZU9mZnNldDp7fSxiYWNrQW5pbURlc3RpbmF0aW9uOnt9LGJhY2tBbmltU3RhcnRlZDp7fSxjYWxjdWxhdGVTd2lwZVNwZWVkOmZ1bmN0aW9uKGQpe25jLmxlbmd0aD4xPyhhPURiKCktUis1MCxiPW5jW25jLmxlbmd0aC0yXVtkXSk6KGE9RGIoKS1RLGI9a2NbZF0pLGMubGFzdEZsaWNrT2Zmc2V0W2RdPWpjW2RdLWIsYy5sYXN0RmxpY2tEaXN0W2RdPU1hdGguYWJzKGMubGFzdEZsaWNrT2Zmc2V0W2RdKSxjLmxhc3RGbGlja1NwZWVkW2RdPWMubGFzdEZsaWNrRGlzdFtkXT4yMD9jLmxhc3RGbGlja09mZnNldFtkXS9hOjAsTWF0aC5hYnMoYy5sYXN0RmxpY2tTcGVlZFtkXSk8LjEmJihjLmxhc3RGbGlja1NwZWVkW2RdPTApLGMuc2xvd0Rvd25SYXRpb1tkXT0uOTUsYy5zbG93RG93blJhdGlvUmV2ZXJzZVtkXT0xLWMuc2xvd0Rvd25SYXRpb1tkXSxjLnNwZWVkRGVjZWxlcmF0aW9uUmF0aW9bZF09MX0sY2FsY3VsYXRlT3ZlckJvdW5kc0FuaW1PZmZzZXQ6ZnVuY3Rpb24oYSxiKXtjLmJhY2tBbmltU3RhcnRlZFthXXx8KHFiW2FdPmViLm1pblthXT9jLmJhY2tBbmltRGVzdGluYXRpb25bYV09ZWIubWluW2FdOnFiW2FdPGViLm1heFthXSYmKGMuYmFja0FuaW1EZXN0aW5hdGlvblthXT1lYi5tYXhbYV0pLHZvaWQgMCE9PWMuYmFja0FuaW1EZXN0aW5hdGlvblthXSYmKGMuc2xvd0Rvd25SYXRpb1thXT0uNyxjLnNsb3dEb3duUmF0aW9SZXZlcnNlW2FdPTEtYy5zbG93RG93blJhdGlvW2FdLGMuc3BlZWREZWNlbGVyYXRpb25SYXRpb0Fic1thXTwuMDUmJihjLmxhc3RGbGlja1NwZWVkW2FdPTAsYy5iYWNrQW5pbVN0YXJ0ZWRbYV09ITAsY2MoXCJib3VuY2Vab29tUGFuXCIrYSxxYlthXSxjLmJhY2tBbmltRGVzdGluYXRpb25bYV0sYnx8MzAwLGUuZWFzaW5nLnNpbmUub3V0LGZ1bmN0aW9uKGIpe3FiW2FdPWIsR2IoKX0pKSkpfSxjYWxjdWxhdGVBbmltT2Zmc2V0OmZ1bmN0aW9uKGEpe2MuYmFja0FuaW1TdGFydGVkW2FdfHwoYy5zcGVlZERlY2VsZXJhdGlvblJhdGlvW2FdPWMuc3BlZWREZWNlbGVyYXRpb25SYXRpb1thXSooYy5zbG93RG93blJhdGlvW2FdK2Muc2xvd0Rvd25SYXRpb1JldmVyc2VbYV0tYy5zbG93RG93blJhdGlvUmV2ZXJzZVthXSpjLnRpbWVEaWZmLzEwKSxjLnNwZWVkRGVjZWxlcmF0aW9uUmF0aW9BYnNbYV09TWF0aC5hYnMoYy5sYXN0RmxpY2tTcGVlZFthXSpjLnNwZWVkRGVjZWxlcmF0aW9uUmF0aW9bYV0pLGMuZGlzdGFuY2VPZmZzZXRbYV09Yy5sYXN0RmxpY2tTcGVlZFthXSpjLnNwZWVkRGVjZWxlcmF0aW9uUmF0aW9bYV0qYy50aW1lRGlmZixxYlthXSs9Yy5kaXN0YW5jZU9mZnNldFthXSl9LHBhbkFuaW1Mb29wOmZ1bmN0aW9uKCl7cmV0dXJuIFpiLnpvb21QYW4mJihaYi56b29tUGFuLnJhZj1KKGMucGFuQW5pbUxvb3ApLGMubm93PURiKCksYy50aW1lRGlmZj1jLm5vdy1jLmxhc3ROb3csYy5sYXN0Tm93PWMubm93LGMuY2FsY3VsYXRlQW5pbU9mZnNldChcInhcIiksYy5jYWxjdWxhdGVBbmltT2Zmc2V0KFwieVwiKSxHYigpLGMuY2FsY3VsYXRlT3ZlckJvdW5kc0FuaW1PZmZzZXQoXCJ4XCIpLGMuY2FsY3VsYXRlT3ZlckJvdW5kc0FuaW1PZmZzZXQoXCJ5XCIpLGMuc3BlZWREZWNlbGVyYXRpb25SYXRpb0Ficy54PC4wNSYmYy5zcGVlZERlY2VsZXJhdGlvblJhdGlvQWJzLnk8LjA1KT8ocWIueD1NYXRoLnJvdW5kKHFiLngpLHFiLnk9TWF0aC5yb3VuZChxYi55KSxHYigpLHZvaWQgX2IoXCJ6b29tUGFuXCIpKTp2b2lkIDB9fTtyZXR1cm4gY30sU2M9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2FsY3VsYXRlU3dpcGVTcGVlZChcInlcIiksZWI9Zi5jdXJySXRlbS5ib3VuZHMsYS5iYWNrQW5pbURlc3RpbmF0aW9uPXt9LGEuYmFja0FuaW1TdGFydGVkPXt9LE1hdGguYWJzKGEubGFzdEZsaWNrU3BlZWQueCk8PS4wNSYmTWF0aC5hYnMoYS5sYXN0RmxpY2tTcGVlZC55KTw9LjA1PyhhLnNwZWVkRGVjZWxlcmF0aW9uUmF0aW9BYnMueD1hLnNwZWVkRGVjZWxlcmF0aW9uUmF0aW9BYnMueT0wLGEuY2FsY3VsYXRlT3ZlckJvdW5kc0FuaW1PZmZzZXQoXCJ4XCIpLGEuY2FsY3VsYXRlT3ZlckJvdW5kc0FuaW1PZmZzZXQoXCJ5XCIpLCEwKTooYWMoXCJ6b29tUGFuXCIpLGEubGFzdE5vdz1EYigpLHZvaWQgYS5wYW5BbmltTG9vcCgpKX0sVGM9ZnVuY3Rpb24oYSxiKXt2YXIgYztnYnx8KHBjPW0pO3ZhciBkO2lmKFwic3dpcGVcIj09PWEpe3ZhciBnPWpjLngta2MueCxoPWIubGFzdEZsaWNrRGlzdC54PDEwO2c+ZWMmJihofHxiLmxhc3RGbGlja09mZnNldC54PjIwKT9kPS0xOi1lYz5nJiYoaHx8Yi5sYXN0RmxpY2tPZmZzZXQueDwtMjApJiYoZD0xKX12YXIgajtkJiYobSs9ZCwwPm0/KG09aS5sb29wP19jKCktMTowLGo9ITApOm0+PV9jKCkmJihtPWkubG9vcD8wOl9jKCktMSxqPSEwKSwoIWp8fGkubG9vcCkmJih1Yis9ZCxzYi09ZCxjPSEwKSk7dmFyIGssbD10Yi54KnNiLG49TWF0aC5hYnMobC1zYy54KTtyZXR1cm4gY3x8bD5zYy54PT1iLmxhc3RGbGlja1NwZWVkLng+MD8oaz1NYXRoLmFicyhiLmxhc3RGbGlja1NwZWVkLngpPjA/bi9NYXRoLmFicyhiLmxhc3RGbGlja1NwZWVkLngpOjMzMyxrPU1hdGgubWluKGssNDAwKSxrPU1hdGgubWF4KGssMjUwKSk6az0zMzMscGM9PT1tJiYoYz0hMSksZ2I9ITAsY2MoXCJtYWluU2Nyb2xsXCIsc2MueCxsLGssZS5lYXNpbmcuY3ViaWMub3V0LEpiLGZ1bmN0aW9uKCl7YmMoKSxnYj0hMSxwYz0tMSwoY3x8cGMhPT1tKSYmZi51cGRhdGVDdXJySXRlbSgpLENiKFwibWFpblNjcm9sbEFuaW1Db21wbGV0ZVwiKX0pLGMmJmYudXBkYXRlQ3Vyckl0ZW0oITApLGN9LFVjPWZ1bmN0aW9uKGEpe3JldHVybiAxL2RiKmEqdH0sVmM9ZnVuY3Rpb24oKXt2YXIgYT1zLGI9U2IoKSxjPVRiKCk7Yj5zP2E9YjpzPmMmJihhPWMpO3ZhciBkLGc9MSxoPWtiO3JldHVybiBqYiYmIVQmJiFsYiYmYj5zPyhmLmNsb3NlKCksITApOihqYiYmKGQ9ZnVuY3Rpb24oYSl7RWIoKGctaCkqYStoKX0pLGYuem9vbVRvKGEsMCwzMDAsZS5lYXNpbmcuY3ViaWMub3V0LGQpLCEwKX07eWIoXCJHZXN0dXJlc1wiLHtwdWJsaWNNZXRob2RzOntpbml0R2VzdHVyZXM6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGIsYyxkLGUpe0M9YStiLEQ9YStjLEU9YStkLEY9ZT9hK2U6XCJcIn07SD1QLnBvaW50ZXJFdmVudCxIJiZQLnRvdWNoJiYoUC50b3VjaD0hMSksSD9uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQ/YShcInBvaW50ZXJcIixcImRvd25cIixcIm1vdmVcIixcInVwXCIsXCJjYW5jZWxcIik6YShcIk1TUG9pbnRlclwiLFwiRG93blwiLFwiTW92ZVwiLFwiVXBcIixcIkNhbmNlbFwiKTpQLnRvdWNoPyhhKFwidG91Y2hcIixcInN0YXJ0XCIsXCJtb3ZlXCIsXCJlbmRcIixcImNhbmNlbFwiKSxJPSEwKTphKFwibW91c2VcIixcImRvd25cIixcIm1vdmVcIixcInVwXCIpLHA9RCtcIiBcIitFK1wiIFwiK0YscT1DLEgmJiFJJiYoST1uYXZpZ2F0b3IubWF4VG91Y2hQb2ludHM+MXx8bmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM+MSksZi5saWtlbHlUb3VjaERldmljZT1JLHJbQ109TmMscltEXT1PYyxyW0VdPVFjLEYmJihyW0ZdPXJbRV0pLFAudG91Y2gmJihxKz1cIiBtb3VzZWRvd25cIixwKz1cIiBtb3VzZW1vdmUgbW91c2V1cFwiLHIubW91c2Vkb3duPXJbQ10sci5tb3VzZW1vdmU9cltEXSxyLm1vdXNldXA9cltFXSksSXx8KGkuYWxsb3dQYW5Ub05leHQ9ITEpfX19KTt2YXIgV2MsWGMsWWMsWmMsJGMsX2MsYWQsYmQ9ZnVuY3Rpb24oYixjLGQsZyl7V2MmJmNsZWFyVGltZW91dChXYyksWmM9ITAsWWM9ITA7dmFyIGg7Yi5pbml0aWFsTGF5b3V0PyhoPWIuaW5pdGlhbExheW91dCxiLmluaXRpYWxMYXlvdXQ9bnVsbCk6aD1pLmdldFRodW1iQm91bmRzRm4mJmkuZ2V0VGh1bWJCb3VuZHNGbihtKTt2YXIgaj1kP2kuaGlkZUFuaW1hdGlvbkR1cmF0aW9uOmkuc2hvd0FuaW1hdGlvbkR1cmF0aW9uLGs9ZnVuY3Rpb24oKXtfYihcImluaXRpYWxab29tXCIpLGQ/KGYudGVtcGxhdGUucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksZi5iZy5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSk6KEViKDEpLGMmJihjLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSxlLmFkZENsYXNzKGEsXCJwc3dwLS1hbmltYXRlZC1pblwiKSxDYihcImluaXRpYWxab29tXCIrKGQ/XCJPdXRFbmRcIjpcIkluRW5kXCIpKSksZyYmZygpLFpjPSExfTtpZighanx8IWh8fHZvaWQgMD09PWgueCl7dmFyIG49ZnVuY3Rpb24oKXtDYihcImluaXRpYWxab29tXCIrKGQ/XCJPdXRcIjpcIkluXCIpKSxzPWIuaW5pdGlhbFpvb21MZXZlbCxMYihxYixiLmluaXRpYWxQb3NpdGlvbiksR2IoKSxhLnN0eWxlLm9wYWNpdHk9ZD8wOjEsRWIoMSksaygpfTtyZXR1cm4gdm9pZCBuKCl9dmFyIG89ZnVuY3Rpb24oKXt2YXIgYz1sLGc9IWYuY3Vyckl0ZW0uc3JjfHxmLmN1cnJJdGVtLmxvYWRFcnJvcnx8aS5zaG93SGlkZU9wYWNpdHk7Yi5taW5pSW1nJiYoYi5taW5pSW1nLnN0eWxlLndlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eT1cImhpZGRlblwiKSxkfHwocz1oLncvYi53LHFiLng9aC54LHFiLnk9aC55LU0sZltnP1widGVtcGxhdGVcIjpcImJnXCJdLnN0eWxlLm9wYWNpdHk9LjAwMSxHYigpKSxhYyhcImluaXRpYWxab29tXCIpLGQmJiFjJiZlLnJlbW92ZUNsYXNzKGEsXCJwc3dwLS1hbmltYXRlZC1pblwiKSxnJiYoZD9lWyhjP1wicmVtb3ZlXCI6XCJhZGRcIikrXCJDbGFzc1wiXShhLFwicHN3cC0tYW5pbWF0ZV9vcGFjaXR5XCIpOnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmFkZENsYXNzKGEsXCJwc3dwLS1hbmltYXRlX29wYWNpdHlcIil9LDMwKSksV2M9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKENiKFwiaW5pdGlhbFpvb21cIisoZD9cIk91dFwiOlwiSW5cIikpLGQpe3ZhciBmPWgudy9iLncsaT17eDpxYi54LHk6cWIueX0sbD1zLG09TSxuPWtiLG89ZnVuY3Rpb24oYil7eiYmKG09ZS5nZXRTY3JvbGxZKCksej0hMSksMT09PWI/KHM9ZixxYi54PWgueCxxYi55PWgueS1tKToocz0oZi1sKSpiK2wscWIueD0oaC54LWkueCkqYitpLngscWIueT0oaC55LW0taS55KSpiK2kueSksR2IoKSxnP2Euc3R5bGUub3BhY2l0eT0xLWI6RWIobi1iKm4pfTtjP2NjKFwiaW5pdGlhbFpvb21cIiwwLDEsaixlLmVhc2luZy5jdWJpYy5vdXQsbyxrKToobygxKSxXYz1zZXRUaW1lb3V0KGssaisyMCkpfWVsc2Ugcz1iLmluaXRpYWxab29tTGV2ZWwsTGIocWIsYi5pbml0aWFsUG9zaXRpb24pLEdiKCksRWIoMSksZz9hLnN0eWxlLm9wYWNpdHk9MTpFYigxKSxXYz1zZXRUaW1lb3V0KGssaisyMCl9LGQ/MjU6OTApfTtvKCl9LGNkPXt9LGRkPVtdLGVkPXtpbmRleDowLGVycm9yTXNnOic8ZGl2IGNsYXNzPVwicHN3cF9fZXJyb3ItbXNnXCI+PGEgaHJlZj1cIiV1cmwlXCIgdGFyZ2V0PVwiX2JsYW5rXCI+VGhlIGltYWdlPC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLjwvZGl2PicsZm9yY2VQcm9ncmVzc2l2ZUxvYWRpbmc6ITEscHJlbG9hZDpbMSwxXSxnZXROdW1JdGVtc0ZuOmZ1bmN0aW9uKCl7cmV0dXJuIFhjLmxlbmd0aH19LGZkPWZ1bmN0aW9uKCl7cmV0dXJue2NlbnRlcjp7eDowLHk6MH0sbWF4Ont4OjAseTowfSxtaW46e3g6MCx5OjB9fX0sZ2Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuYm91bmRzO2QuY2VudGVyLng9TWF0aC5yb3VuZCgoY2QueC1iKS8yKSxkLmNlbnRlci55PU1hdGgucm91bmQoKGNkLnktYykvMikrYS52R2FwLnRvcCxkLm1heC54PWI+Y2QueD9NYXRoLnJvdW5kKGNkLngtYik6ZC5jZW50ZXIueCxkLm1heC55PWM+Y2QueT9NYXRoLnJvdW5kKGNkLnktYykrYS52R2FwLnRvcDpkLmNlbnRlci55LGQubWluLng9Yj5jZC54PzA6ZC5jZW50ZXIueCxkLm1pbi55PWM+Y2QueT9hLnZHYXAudG9wOmQuY2VudGVyLnl9LGhkPWZ1bmN0aW9uKGEsYixjKXtpZihhLnNyYyYmIWEubG9hZEVycm9yKXt2YXIgZD0hYztpZihkJiYoYS52R2FwfHwoYS52R2FwPXt0b3A6MCxib3R0b206MH0pLENiKFwicGFyc2VWZXJ0aWNhbE1hcmdpblwiLGEpKSxjZC54PWIueCxjZC55PWIueS1hLnZHYXAudG9wLWEudkdhcC5ib3R0b20sZCl7dmFyIGU9Y2QueC9hLncsZj1jZC55L2EuaDthLmZpdFJhdGlvPWY+ZT9lOmY7dmFyIGc9aS5zY2FsZU1vZGU7XCJvcmlnXCI9PT1nP2M9MTpcImZpdFwiPT09ZyYmKGM9YS5maXRSYXRpbyksYz4xJiYoYz0xKSxhLmluaXRpYWxab29tTGV2ZWw9YyxhLmJvdW5kc3x8KGEuYm91bmRzPWZkKCkpfWlmKCFjKXJldHVybjtyZXR1cm4gZ2QoYSxhLncqYyxhLmgqYyksZCYmYz09PWEuaW5pdGlhbFpvb21MZXZlbCYmKGEuaW5pdGlhbFBvc2l0aW9uPWEuYm91bmRzLmNlbnRlciksYS5ib3VuZHN9cmV0dXJuIGEudz1hLmg9MCxhLmluaXRpYWxab29tTGV2ZWw9YS5maXRSYXRpbz0xLGEuYm91bmRzPWZkKCksYS5pbml0aWFsUG9zaXRpb249YS5ib3VuZHMuY2VudGVyLGEuYm91bmRzfSxpZD1mdW5jdGlvbihhLGIsYyxkLGUsZyl7aWYoIWIubG9hZEVycm9yKXt2YXIgaCxqPWYuaXNEcmFnZ2luZygpJiYhZi5pc1pvb21pbmcoKSxrPWE9PT1tfHxmLmlzTWFpblNjcm9sbEFuaW1hdGluZygpfHxqOyFlJiYoSXx8aS5hbHdheXNGYWRlSW4pJiZrJiYoaD0hMCksZCYmKGgmJihkLnN0eWxlLm9wYWNpdHk9MCksYi5pbWFnZUFwcGVuZGVkPSEwLGMuYXBwZW5kQ2hpbGQoZCksaCYmc2V0VGltZW91dChmdW5jdGlvbigpe2Quc3R5bGUub3BhY2l0eT0xLGcmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZiLmxvYWRlZCYmYi5wbGFjZWhvbGRlciYmKGIucGxhY2Vob2xkZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixiLnBsYWNlaG9sZGVyPW51bGwpfSw1MDApfSw1MCkpfX0samQ9ZnVuY3Rpb24oYSl7YS5sb2FkaW5nPSEwLGEubG9hZGVkPSExO3ZhciBiPWEuaW1nPWUuY3JlYXRlRWwoXCJwc3dwX19pbWdcIixcImltZ1wiKSxjPWZ1bmN0aW9uKCl7YS5sb2FkaW5nPSExLGEubG9hZGVkPSEwLGEubG9hZENvbXBsZXRlP2EubG9hZENvbXBsZXRlKGEpOmEuaW1nPW51bGwsYi5vbmxvYWQ9Yi5vbmVycm9yPW51bGwsYj1udWxsfTtyZXR1cm4gYi5vbmxvYWQ9YyxiLm9uZXJyb3I9ZnVuY3Rpb24oKXthLmxvYWRFcnJvcj0hMCxjKCl9LGIuc3JjPWEuc3JjLGJ9LGtkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3JjJiZhLmxvYWRFcnJvciYmYS5jb250YWluZXI/KGImJihhLmNvbnRhaW5lci5pbm5lckhUTUw9XCJcIiksYS5jb250YWluZXIuaW5uZXJIVE1MPWkuZXJyb3JNc2cucmVwbGFjZShcIiV1cmwlXCIsYS5zcmMpLCEwKTp2b2lkIDB9LGxkPWZ1bmN0aW9uKCl7aWYoZGQubGVuZ3RoKXtmb3IodmFyIGEsYj0wO2I8ZGQubGVuZ3RoO2IrKylhPWRkW2JdLGEuaG9sZGVyLmluZGV4PT09YS5pbmRleCYmaWQoYS5pbmRleCxhLml0ZW0sYS5iYXNlRGl2LGEuaW1nKTtkZD1bXX19O3liKFwiQ29udHJvbGxlclwiLHtwdWJsaWNNZXRob2RzOntsYXp5TG9hZEl0ZW06ZnVuY3Rpb24oYSl7YT16YihhKTt2YXIgYj0kYyhhKTtiJiZiLnNyYyYmIWIubG9hZGVkJiYhYi5sb2FkaW5nJiYoQ2IoXCJnZXR0aW5nRGF0YVwiLGEsYiksamQoYikpfSxpbml0Q29udHJvbGxlcjpmdW5jdGlvbigpe2UuZXh0ZW5kKGksZWQsITApLGYuaXRlbXM9WGM9YywkYz1mLmdldEl0ZW1BdCxfYz1pLmdldE51bUl0ZW1zRm4sYWQ9aS5sb29wLF9jKCk8MyYmKGkubG9vcD0hMSksQmIoXCJiZWZvcmVDaGFuZ2VcIixmdW5jdGlvbihhKXt2YXIgYixjPWkucHJlbG9hZCxkPW51bGw9PT1hPyEwOmE+MCxlPU1hdGgubWluKGNbMF0sX2MoKSksZz1NYXRoLm1pbihjWzFdLF9jKCkpO2ZvcihiPTE7KGQ/ZzplKT49YjtiKyspZi5sYXp5TG9hZEl0ZW0obStiKTtmb3IoYj0xOyhkP2U6Zyk+PWI7YisrKWYubGF6eUxvYWRJdGVtKG0tYil9KSxCYihcImluaXRpYWxMYXlvdXRcIixmdW5jdGlvbigpe2YuY3Vyckl0ZW0uaW5pdGlhbExheW91dD1pLmdldFRodW1iQm91bmRzRm4mJmkuZ2V0VGh1bWJCb3VuZHNGbihtKX0pLEJiKFwibWFpblNjcm9sbEFuaW1Db21wbGV0ZVwiLGxkKSxCYihcImluaXRpYWxab29tSW5FbmRcIixsZCksQmIoXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO2I8WGMubGVuZ3RoO2IrKylhPVhjW2JdLGEuY29udGFpbmVyJiYoYS5jb250YWluZXI9bnVsbCksYS5wbGFjZWhvbGRlciYmKGEucGxhY2Vob2xkZXI9bnVsbCksYS5pbWcmJihhLmltZz1udWxsKSxhLnByZWxvYWRlciYmKGEucHJlbG9hZGVyPW51bGwpLGEubG9hZEVycm9yJiYoYS5sb2FkZWQ9YS5sb2FkRXJyb3I9ITEpO2RkPW51bGx9KX0sZ2V0SXRlbUF0OmZ1bmN0aW9uKGEpe3JldHVybiBhPj0wJiZ2b2lkIDAhPT1YY1thXT9YY1thXTohMX0sYWxsb3dQcm9ncmVzc2l2ZUltZzpmdW5jdGlvbigpe3JldHVybiBpLmZvcmNlUHJvZ3Jlc3NpdmVMb2FkaW5nfHwhSXx8aS5tb3VzZVVzZWR8fHNjcmVlbi53aWR0aD4xMjAwfSxzZXRDb250ZW50OmZ1bmN0aW9uKGEsYil7aS5sb29wJiYoYj16YihiKSk7dmFyIGM9Zi5nZXRJdGVtQXQoYS5pbmRleCk7YyYmKGMuY29udGFpbmVyPW51bGwpO3ZhciBkLGc9Zi5nZXRJdGVtQXQoYik7aWYoIWcpcmV0dXJuIHZvaWQoYS5lbC5pbm5lckhUTUw9XCJcIik7Q2IoXCJnZXR0aW5nRGF0YVwiLGIsZyksYS5pbmRleD1iLGEuaXRlbT1nO3ZhciBoPWcuY29udGFpbmVyPWUuY3JlYXRlRWwoXCJwc3dwX196b29tLXdyYXBcIik7aWYoIWcuc3JjJiZnLmh0bWwmJihnLmh0bWwudGFnTmFtZT9oLmFwcGVuZENoaWxkKGcuaHRtbCk6aC5pbm5lckhUTUw9Zy5odG1sKSxrZChnKSwhZy5zcmN8fGcubG9hZEVycm9yfHxnLmxvYWRlZClnLnNyYyYmIWcubG9hZEVycm9yJiYoZD1lLmNyZWF0ZUVsKFwicHN3cF9faW1nXCIsXCJpbWdcIiksZC5zdHlsZS53ZWJraXRCYWNrZmFjZVZpc2liaWxpdHk9XCJoaWRkZW5cIixkLnN0eWxlLm9wYWNpdHk9MSxkLnNyYz1nLnNyYyxpZChiLGcsaCxkLCEwKSk7ZWxzZXtpZihnLmxvYWRDb21wbGV0ZT1mdW5jdGlvbihjKXtpZihqKXtpZihjLmltZy5zdHlsZS53ZWJraXRCYWNrZmFjZVZpc2liaWxpdHk9XCJoaWRkZW5cIixhJiZhLmluZGV4PT09Yil7aWYoa2QoYywhMCkpcmV0dXJuIGMubG9hZENvbXBsZXRlPWMuaW1nPW51bGwsaGQoYyxyYiksSGIoYyksdm9pZChhLmluZGV4PT09bSYmZi51cGRhdGVDdXJyWm9vbUl0ZW0oKSk7Yy5pbWFnZUFwcGVuZGVkPyFaYyYmYy5wbGFjZWhvbGRlciYmKGMucGxhY2Vob2xkZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixjLnBsYWNlaG9sZGVyPW51bGwpOlAudHJhbnNmb3JtJiYoZ2J8fFpjKT9kZC5wdXNoKHtpdGVtOmMsYmFzZURpdjpoLGltZzpjLmltZyxpbmRleDpiLGhvbGRlcjphfSk6aWQoYixjLGgsYy5pbWcsZ2J8fFpjKX1jLmxvYWRDb21wbGV0ZT1udWxsLGMuaW1nPW51bGwsQ2IoXCJpbWFnZUxvYWRDb21wbGV0ZVwiLGIsYyl9fSxlLmZlYXR1cmVzLnRyYW5zZm9ybSl7dmFyIGs9XCJwc3dwX19pbWcgcHN3cF9faW1nLS1wbGFjZWhvbGRlclwiO2srPWcubXNyYz9cIlwiOlwiIHBzd3BfX2ltZy0tcGxhY2Vob2xkZXItLWJsYW5rXCI7dmFyIGw9ZS5jcmVhdGVFbChrLGcubXNyYz9cImltZ1wiOlwiXCIpO2cubXNyYyYmKGwuc3JjPWcubXNyYyksbC5zdHlsZS53aWR0aD1nLncrXCJweFwiLGwuc3R5bGUuaGVpZ2h0PWcuaCtcInB4XCIsaC5hcHBlbmRDaGlsZChsKSxnLnBsYWNlaG9sZGVyPWx9Zy5sb2FkaW5nfHxqZChnKSxmLmFsbG93UHJvZ3Jlc3NpdmVJbWcoKSYmKCFZYyYmUC50cmFuc2Zvcm0/ZGQucHVzaCh7aXRlbTpnLGJhc2VEaXY6aCxpbWc6Zy5pbWcsaW5kZXg6Yixob2xkZXI6YX0pOmlkKGIsZyxoLGcuaW1nLCEwLCEwKSl9aGQoZyxyYiksWWN8fGIhPT1tP0hiKGcpOihmYj1oLnN0eWxlLGJkKGcsZHx8Zy5pbWcpKSxhLmVsLmlubmVySFRNTD1cIlwiLGEuZWwuYXBwZW5kQ2hpbGQoaCl9LGNsZWFuU2xpZGU6ZnVuY3Rpb24oYSl7YS5pbWcmJihhLmltZy5vbmxvYWQ9YS5pbWcub25lcnJvcj1udWxsKSxhLmxvYWRlZD1hLmxvYWRpbmc9YS5pbWc9YS5pbWFnZUFwcGVuZGVkPSExfX19KTt2YXIgbWQsbmQ9e30sb2Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIiksZT17b3JpZ0V2ZW50OmEsdGFyZ2V0OmEudGFyZ2V0LHJlbGVhc2VQb2ludDpiLHBvaW50ZXJUeXBlOmN8fFwidG91Y2hcIn07ZC5pbml0Q3VzdG9tRXZlbnQoXCJwc3dwVGFwXCIsITAsITAsZSksYS50YXJnZXQuZGlzcGF0Y2hFdmVudChkKX07eWIoXCJUYXBcIix7cHVibGljTWV0aG9kczp7aW5pdFRhcDpmdW5jdGlvbigpe0JiKFwiZmlyc3RUb3VjaFN0YXJ0XCIsZi5vblRhcFN0YXJ0KSxCYihcInRvdWNoUmVsZWFzZVwiLGYub25UYXBSZWxlYXNlKSxCYihcImRlc3Ryb3lcIixmdW5jdGlvbigpe25kPXt9LG1kPW51bGx9KX0sb25UYXBTdGFydDpmdW5jdGlvbihhKXthLmxlbmd0aD4xJiYoY2xlYXJUaW1lb3V0KG1kKSxtZD1udWxsKX0sb25UYXBSZWxlYXNlOmZ1bmN0aW9uKGEsYil7aWYoYiYmIVomJiFYJiYhJGIpe3ZhciBjPWI7aWYobWQmJihjbGVhclRpbWVvdXQobWQpLG1kPW51bGwsd2MoYyxuZCkpKXJldHVybiB2b2lkIENiKFwiZG91YmxlVGFwXCIsYyk7aWYoXCJtb3VzZVwiPT09Yi50eXBlKXJldHVybiB2b2lkIG9kKGEsYixcIm1vdXNlXCIpO3ZhciBkPWEudGFyZ2V0LnRhZ05hbWUudG9VcHBlckNhc2UoKTtpZihcIkJVVFRPTlwiPT09ZHx8ZS5oYXNDbGFzcyhhLnRhcmdldCxcInBzd3BfX3NpbmdsZS10YXBcIikpcmV0dXJuIHZvaWQgb2QoYSxiKTtMYihuZCxjKSxtZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b2QoYSxiKSxtZD1udWxsfSwzMDApfX19fSk7dmFyIHBkO3liKFwiRGVza3RvcFpvb21cIix7cHVibGljTWV0aG9kczp7aW5pdERlc2t0b3Bab29tOmZ1bmN0aW9uKCl7Tnx8KEk/QmIoXCJtb3VzZVVzZWRcIixmdW5jdGlvbigpe2Yuc2V0dXBEZXNrdG9wWm9vbSgpfSk6Zi5zZXR1cERlc2t0b3Bab29tKCEwKSl9LHNldHVwRGVza3RvcFpvb206ZnVuY3Rpb24oYil7cGQ9e307dmFyIGM9XCJ3aGVlbCBtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsXCI7QmIoXCJiaW5kRXZlbnRzXCIsZnVuY3Rpb24oKXtlLmJpbmQoYSxjLGYuaGFuZGxlTW91c2VXaGVlbCl9KSxCYihcInVuYmluZEV2ZW50c1wiLGZ1bmN0aW9uKCl7cGQmJmUudW5iaW5kKGEsYyxmLmhhbmRsZU1vdXNlV2hlZWwpfSksZi5tb3VzZVpvb21lZEluPSExO3ZhciBkLGc9ZnVuY3Rpb24oKXtmLm1vdXNlWm9vbWVkSW4mJihlLnJlbW92ZUNsYXNzKGEsXCJwc3dwLS16b29tZWQtaW5cIiksZi5tb3VzZVpvb21lZEluPSExKSwxPnM/ZS5hZGRDbGFzcyhhLFwicHN3cC0tem9vbS1hbGxvd2VkXCIpOmUucmVtb3ZlQ2xhc3MoYSxcInBzd3AtLXpvb20tYWxsb3dlZFwiKSxoKCl9LGg9ZnVuY3Rpb24oKXtkJiYoZS5yZW1vdmVDbGFzcyhhLFwicHN3cC0tZHJhZ2dpbmdcIiksZD0hMSl9O0JiKFwicmVzaXplXCIsZyksQmIoXCJhZnRlckNoYW5nZVwiLGcpLEJiKFwicG9pbnRlckRvd25cIixmdW5jdGlvbigpe2YubW91c2Vab29tZWRJbiYmKGQ9ITAsZS5hZGRDbGFzcyhhLFwicHN3cC0tZHJhZ2dpbmdcIikpfSksQmIoXCJwb2ludGVyVXBcIixoKSxifHxnKCl9LGhhbmRsZU1vdXNlV2hlZWw6ZnVuY3Rpb24oYSl7aWYoczw9Zi5jdXJySXRlbS5maXRSYXRpbylyZXR1cm4gaS5jbG9zZU9uU2Nyb2xsfHxhLnByZXZlbnREZWZhdWx0KCksITA7aWYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkscGQueD0wLFwiZGVsdGFYXCJpbiBhKXBkLng9YS5kZWx0YVgscGQueT1hLmRlbHRhWTtlbHNlIGlmKFwid2hlZWxEZWx0YVwiaW4gYSlhLndoZWVsRGVsdGFYJiYocGQueD0tLjE2KmEud2hlZWxEZWx0YVgpLHBkLnk9YS53aGVlbERlbHRhWT8tLjE2KmEud2hlZWxEZWx0YVk6LS4xNiphLndoZWVsRGVsdGE7ZWxzZXtpZighKFwiZGV0YWlsXCJpbiBhKSlyZXR1cm47cGQueT1hLmRldGFpbH1SYihzLCEwKSxmLnBhblRvKHFiLngtcGQueCxxYi55LXBkLnkpfSx0b2dnbGVEZXNrdG9wWm9vbTpmdW5jdGlvbihiKXtiPWJ8fHt4OnJiLngvMix5OnJiLnkvMitNfTt2YXIgYz1pLmdldERvdWJsZVRhcFpvb20oITAsZi5jdXJySXRlbSksZD1zPT09YztmLm1vdXNlWm9vbWVkSW49IWQsZi56b29tVG8oZD9mLmN1cnJJdGVtLmluaXRpYWxab29tTGV2ZWw6YyxiLDMzMyksZVsoZD9cInJlbW92ZVwiOlwiYWRkXCIpK1wiQ2xhc3NcIl0oYSxcInBzd3AtLXpvb21lZC1pblwiKX19fSk7dmFyIHFkLHJkLHNkLHRkLHVkLHZkLHdkLHhkLHlkLHpkLEFkLEJkLENkPXtoaXN0b3J5OiEwLGdhbGxlcnlVSUQ6MX0sRGQ9ZnVuY3Rpb24oKXtyZXR1cm4gQWQuaGFzaC5zdWJzdHJpbmcoMSl9LEVkPWZ1bmN0aW9uKCl7cWQmJmNsZWFyVGltZW91dChxZCksc2QmJmNsZWFyVGltZW91dChzZCl9LEZkPWZ1bmN0aW9uKCl7dmFyIGE9RGQoKSxiPXt9O2lmKGEubGVuZ3RoPDUpcmV0dXJuIGI7Zm9yKHZhciBjPWEuc3BsaXQoXCImXCIpLGQ9MDtkPGMubGVuZ3RoO2QrKylpZihjW2RdKXt2YXIgZT1jW2RdLnNwbGl0KFwiPVwiKTtlLmxlbmd0aDwyfHwoYltlWzBdXT1lWzFdKX1yZXR1cm4gYi5waWQ9cGFyc2VJbnQoYi5waWQsMTApLTEsYi5waWQ8MCYmKGIucGlkPTApLGJ9LEdkPWZ1bmN0aW9uKCl7aWYoc2QmJmNsZWFyVGltZW91dChzZCksJGJ8fFcpcmV0dXJuIHZvaWQoc2Q9c2V0VGltZW91dChHZCw1MDApKTt0ZD9jbGVhclRpbWVvdXQocmQpOnRkPSEwO3ZhciBhPXdkK1wiJmdpZD1cIitpLmdhbGxlcnlVSUQrXCImcGlkPVwiKyhtKzEpO3hkfHwtMT09PUFkLmhhc2guaW5kZXhPZihhKSYmKHpkPSEwKTt2YXIgYj1BZC5ocmVmLnNwbGl0KFwiI1wiKVswXStcIiNcIithO0JkP1wiI1wiK2EhPT13aW5kb3cubG9jYXRpb24uaGFzaCYmaGlzdG9yeVt4ZD9cInJlcGxhY2VTdGF0ZVwiOlwicHVzaFN0YXRlXCJdKFwiXCIsZG9jdW1lbnQudGl0bGUsYik6eGQ/QWQucmVwbGFjZShiKTpBZC5oYXNoPWEseGQ9ITAscmQ9c2V0VGltZW91dChmdW5jdGlvbigpe3RkPSExfSw2MCl9O3liKFwiSGlzdG9yeVwiLHtwdWJsaWNNZXRob2RzOntpbml0SGlzdG9yeTpmdW5jdGlvbigpe2lmKGUuZXh0ZW5kKGksQ2QsITApLGkuaGlzdG9yeSl7QWQ9d2luZG93LmxvY2F0aW9uLHpkPSExLHlkPSExLHhkPSExLHdkPURkKCksQmQ9XCJwdXNoU3RhdGVcImluIGhpc3Rvcnksd2QuaW5kZXhPZihcImdpZD1cIik+LTEmJih3ZD13ZC5zcGxpdChcIiZnaWQ9XCIpWzBdLHdkPXdkLnNwbGl0KFwiP2dpZD1cIilbMF0pLEJiKFwiYWZ0ZXJDaGFuZ2VcIixmLnVwZGF0ZVVSTCksQmIoXCJ1bmJpbmRFdmVudHNcIixmdW5jdGlvbigpe2UudW5iaW5kKHdpbmRvdyxcImhhc2hjaGFuZ2VcIixmLm9uSGFzaENoYW5nZSl9KTt2YXIgYT1mdW5jdGlvbigpe3ZkPSEwLHlkfHwoemQ/aGlzdG9yeS5iYWNrKCk6d2Q/QWQuaGFzaD13ZDpCZD9oaXN0b3J5LnB1c2hTdGF0ZShcIlwiLGRvY3VtZW50LnRpdGxlLEFkLnBhdGhuYW1lK0FkLnNlYXJjaCk6QWQuaGFzaD1cIlwiKSxFZCgpfTtCYihcInVuYmluZEV2ZW50c1wiLGZ1bmN0aW9uKCl7bCYmYSgpfSksQmIoXCJkZXN0cm95XCIsZnVuY3Rpb24oKXt2ZHx8YSgpfSksQmIoXCJmaXJzdFVwZGF0ZVwiLGZ1bmN0aW9uKCl7bT1GZCgpLnBpZH0pO3ZhciBiPXdkLmluZGV4T2YoXCJwaWQ9XCIpO2I+LTEmJih3ZD13ZC5zdWJzdHJpbmcoMCxiKSxcIiZcIj09PXdkLnNsaWNlKC0xKSYmKHdkPXdkLnNsaWNlKDAsLTEpKSksc2V0VGltZW91dChmdW5jdGlvbigpe2omJmUuYmluZCh3aW5kb3csXCJoYXNoY2hhbmdlXCIsZi5vbkhhc2hDaGFuZ2UpfSw0MCl9fSxvbkhhc2hDaGFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gRGQoKT09PXdkPyh5ZD0hMCx2b2lkIGYuY2xvc2UoKSk6dm9pZCh0ZHx8KHVkPSEwLGYuZ29UbyhGZCgpLnBpZCksdWQ9ITEpKX0sdXBkYXRlVVJMOmZ1bmN0aW9uKCl7RWQoKSx1ZHx8KHhkP3FkPXNldFRpbWVvdXQoR2QsODAwKTpHZCgpKX19fSksZS5leHRlbmQoZixkYyl9O3JldHVybiBhfSk7IiwidmFyIERlZ2EgPSByZXF1aXJlKCdkZWdhJyksXG5cbiAgICAkX3NlYXJjaFBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaCcpLFxuICAgICRfc2VhcmNoRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hfX2Zvcm0nKSxcbiAgICAkX3NlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaF9faW5wdXQnKSxcbiAgICAkX3NlYXJjaENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaF9fY2xvc2UnKSxcblxuICAgIF9jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkX3NlYXJjaFBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJy1hY3RpdmUnKTtcbiAgICAgICAgJF9zZWFyY2hJbnB1dC5ibHVyKCk7XG4gICAgICAgICRfc2VhcmNoSW5wdXQudmFsdWUgPSAnJztcbiAgICB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgRGVnYShkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zZWFyY2gtdHJpZ2dlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICRfc2VhcmNoUGFuZWwuY2xhc3NMaXN0LmFkZCgnLWFjdGl2ZScpO1xuICAgICAgICAkX3NlYXJjaElucHV0LmZvY3VzKCk7XG4gICAgfSk7XG5cbiAgICAkX3NlYXJjaEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICAkX3NlYXJjaElucHV0LnZhbHVlID0gJ3NpdGU6c3lzb2V2Lm9yZyAnICsgJF9zZWFyY2hJbnB1dC52YWx1ZTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX2Nsb3NlKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9KTtcblxuICAgICRfc2VhcmNoQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIF9jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgICAgIF9jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn07XG4iLCJyZXF1aXJlKCcuLi9jb21wb25lbnRzL19zZWFyY2gvX3NlYXJjaC5qcycpKCk7XG5cbnZhciBQaG90b1N3aXBlID0gcmVxdWlyZSgnLi4vY29tcG9uZW50cy9fcGhvdG9zd2lwZS9waG90b3N3aXBlLm1pbi5qcycpLFxuICAgIFBob3RvU3dpcGVVSV9EZWZhdWx0ID0gcmVxdWlyZSgnLi4vY29tcG9uZW50cy9fcGhvdG9zd2lwZS9waG90b3N3aXBlLXVpLWRlZmF1bHQubWluLmpzJyksXG4gICAgRGVnYSA9IHJlcXVpcmUoJ2RlZ2EnKSxcblxuICAgIHBzd3BFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBzd3AnKSxcblxuICAgIG9wZW5QaG90b1N3aXBlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGl0ZW0sIHNpemUsIGdhbGxlcnk7XG5cbiAgICAgICAgc2l6ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXNpemUnKS5zcGxpdCgneCcpO1xuXG4gICAgICAgIGl0ZW1zID0gW3tcbiAgICAgICAgICAgIHNyYzogdGhpcy5ocmVmLFxuICAgICAgICAgICAgdzogc2l6ZVswXSxcbiAgICAgICAgICAgIGg6IHNpemVbMV0sXG4gICAgICAgICAgICB0aXRsZTogdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGVzYycpXG4gICAgICAgIH1dO1xuXG4gICAgICAgIGdhbGxlcnkgPSBuZXcgUGhvdG9Td2lwZShwc3dwRWxlbWVudCwgUGhvdG9Td2lwZVVJX0RlZmF1bHQsIGl0ZW1zLCB7fSk7XG4gICAgICAgIGdhbGxlcnkuaW5pdCgpO1xuICAgIH07XG5cbkRlZ2EoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubGlnaHRib3gtdGFyZ2V0Jywgb3BlblBob3RvU3dpcGUpO1xuIiwiLyoqXG4gKiBAYXV0aG9yIFN0YW5pc2xhdiBTeXNvZXYgPEBkNHJrcjAwdD5cbiAqIEBsaWNlbnNlIE1JVFxuICogQHZlcnNpb24gMC4xLjBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV2ZW50IGRlbGVnYXRpb24gbGlicmFyeSBvbiBwbGFpbiBKYXZhU2NyaXB0XG4gKi9cblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LkRlZ2EgPSBmYWN0b3J5KCk7XG4gICAgfVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9pbnN0YW5jZXMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGVsZW0gbWF0Y2hlcyB0byBzZWxlY3RvclxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGVsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIOKAlCAuY2xhc3MgfCAjaWQgfCBkaXZcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufFVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfbWF0Y2hFbGVtKGVsLCBzZWxlY3Rvcikge1xuICAgICAgICBpZiAoc2VsZWN0b3IubWF0Y2goL15cXC4vKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZWN0b3IucmVwbGFjZSgvXlxcLi8sICcnKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IubWF0Y2goL14jLykpIHtcbiAgICAgICAgICAgIHJldHVybiBlbC5pZCA9PT0gc2VsZWN0b3IucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZWwudGFnTmFtZSA9PT0gc2VsZWN0b3IudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBmb3IgZ2VuZXJhdGVkIGV2ZW50IGxpc3RlbmVyIGJ5IG9yaWdpbmFsXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBldmVudExpc3RlbmVycyDigJQgbGlzdCBvZiBldmVudCBsaXN0ZW5lcnNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDigJQgZXZlbnQgdHlwZSBsaWtlICdjbGljaycgfCAnZm9jdXMnIHwgJ2JsdXInXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIOKAlCAuY2xhc3MgfCAjaWQgfCBkaXZcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDigJQgdXNlciBwYXNzZWQgY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHVzZUNhcHR1cmVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfZmluZEV2ZW50TGlzdGVuZXIoZXZlbnRMaXN0ZW5lcnMsIHR5cGUsIHNlbGVjdG9yLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50TGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnRMaXN0ZW5lcnNbaV0ub3JpZ2luYWwgPT09IGNhbGxiYWNrICYmXG4gICAgICAgICAgICAgICAgZXZlbnRMaXN0ZW5lcnNbaV0udXNlQ2FwdHVyZSA9PT0gdXNlQ2FwdHVyZSAmJlxuICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXJzW2ldLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgICBldmVudExpc3RlbmVyc1tpXS5zZWxlY3RvciA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRMaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHVzZUNhcHR1cmUgZm9yIGV2ZW50IGxpc3RlbmVycywgaWYgYmx1ciBvciBmb2N1cyB3ZSBzaG91bGQgYWx3YXlzIHVzZSB1c2VDYXB0dXJlXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDigJQgZXZlbnQgdHlwZSBsaWtlICdjbGljaycgfCAnZm9jdXMnIHwgJ2JsdXInXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB1c2VDYXB0dXJlIOKAlCB1c2VyIGRlZmluZWQgdXNlQ2FwdHVyZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgZnVuY3Rpb24gX2dlbmVyYXRlVXNlQ2FwdHVyZSh0eXBlLCB1c2VDYXB0dXJlKSB7XG4gICAgICAgIHJldHVybiB0eXBlID09PSAnYmx1cicgfHwgdHlwZSA9PT0gJ2ZvY3VzJyB8fCB1c2VDYXB0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBldmVudExpc3RlbmVyIGl0ZW0gZm9yIERlZ2EuX2V2ZW50TGlzdGVuZXJzIGxpc3RcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDigJQgZXZlbnQgdHlwZSBsaWtlICdjbGljaycgfCAnZm9jdXMnIHwgJ2JsdXInXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIOKAlCAuY2xhc3MgfCAjaWQgfCBkaXZcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDigJQgdXNlciBwYXNzZWQgY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHVzZUNhcHR1cmVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfZ2VuZXJhdGVFdmVudExpc3RlbmVyKHR5cGUsIHNlbGVjdG9yLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcixcbiAgICAgICAgICAgIHVzZUNhcHR1cmU6IF9nZW5lcmF0ZVVzZUNhcHR1cmUodHlwZSwgdXNlQ2FwdHVyZSksXG5cbiAgICAgICAgICAgIG9yaWdpbmFsOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGdlbmVyYXRlZDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfbWF0Y2hFbGVtKGVsLCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoZWwsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgRGVnYSBJbnN0YW5jZVxuICAgICAqIEBjbGFzc1xuICAgICAqIEBwYXJhbSB7RG9tRWxlbXxTdHJpbmd9IGVsZW0g4oCUIGRvbSBlbGVtIG9yIHNlbGVjdG9yIGZvciBkb2N1bWVudC5xdWVyeVNlbGVjdG9yXG4gICAgICovXG4gICAgdmFyIERlZ2EgPSBmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERlZ2EpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9pbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoX2luc3RhbmNlc1tpXS5lbGVtID09PSBlbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfaW5zdGFuY2VzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRlZ2EgPSBuZXcgRGVnYShlbGVtKTtcbiAgICAgICAgICAgIF9pbnN0YW5jZXMucHVzaChkZWdhKTtcbiAgICAgICAgICAgIHJldHVybiBkZWdhO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtID0gZWxlbTtcbiAgICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIG9uIGV2ZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUg4oCUIGV2ZW50IHR5cGUgbGlrZSAnY2xpY2snIHwgJ2ZvY3VzJyB8ICdibHVyJ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvciDigJQgLmNsYXNzIHwgI2lkIHwgZGl2XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sg4oCUIHVzZXIgcGFzc2VkIGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAgICAgKiBAcmV0dXJuIHtEZWdhfSB0aGlzXG4gICAgICovXG4gICAgRGVnYS5wcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBzZWxlY3RvciwgY2FsbGJhY2ssIHVzZUNhcHR1cmUpIHtcbiAgICAgICAgdmFyIGV2ZW50TGlzdGVuZXIgPSBfZ2VuZXJhdGVFdmVudExpc3RlbmVyKHR5cGUsIHNlbGVjdG9yLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSk7XG5cbiAgICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMucHVzaChldmVudExpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5lbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZXZlbnRMaXN0ZW5lci5nZW5lcmF0ZWQsIGV2ZW50TGlzdGVuZXIudXNlQ2FwdHVyZSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVuc3Vic2NyaWJlIGZyb20gZXZlbnRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDigJQgZXZlbnQgdHlwZSBsaWtlICdjbGljaycgfCAnZm9jdXMnIHwgJ2JsdXInXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIOKAlCAuY2xhc3MgfCAjaWQgfCBkaXZcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDigJQgdXNlciBwYXNzZWQgY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAgICAgKiBAcmV0dXJuIHtEZWdhfSB0aGlzXG4gICAgICovXG4gICAgRGVnYS5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24odHlwZSwgc2VsZWN0b3IsIGNhbGxiYWNrLCB1c2VDYXB0dXJlKSB7XG4gICAgICAgIHVzZUNhcHR1cmUgPSBfZ2VuZXJhdGVVc2VDYXB0dXJlKHR5cGUsIHVzZUNhcHR1cmUpO1xuXG4gICAgICAgIHZhciBldmVudExpc3RlbmVyID0gX2ZpbmRFdmVudExpc3RlbmVyKHRoaXMuX2V2ZW50TGlzdGVuZXJzLCB0eXBlLCBzZWxlY3RvciwgY2FsbGJhY2ssIHVzZUNhcHR1cmUpO1xuXG4gICAgICAgIGlmIChldmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBldmVudExpc3RlbmVyLmdlbmVyYXRlZCwgZXZlbnRMaXN0ZW5lci51c2VDYXB0dXJlKTtcblxuICAgICAgICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKHRoaXMuX2V2ZW50TGlzdGVuZXJzLmluZGV4T2YoZXZlbnRMaXN0ZW5lciksIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWdhO1xufSk7XG4iXX0=
